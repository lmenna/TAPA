"use strict";

var _getCryptoData = require("./utils/getCryptoData.js");

var _comparePricingData = require("./utils/comparePricingData");

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

require("@babel/polyfill");

var XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest;

var poloniexURL = "https://poloniex.com/public?command=returnTicker";
var coinbaseURL = "https://api.pro.coinbase.com/products";
var bittrexURL = "https://bittrex.com/api/v1.1/public/getmarketsummary";
var bittrexURLAll = "https://bittrex.com/api/v1.1/public/getmarketsummaries";
var threshold = 1.01;
var numberOfChecks = 0;
var intervalHandel = -1;
var maxBuyArb = 0;
var maxSellArb = 0;
var maxSellArbETH = 0;
var maxSellArbXMR = 0;
var timeInSecondsBetweenPriceChecks = 15;

function poloInternalCompare() {
  console.log("BEGIN: getPricingData");
  var xmlhttp = new XMLHttpRequest(),
      method = "GET",
      url = poloniexURL;
  console.log("Loading data from : Http.send(", url, ")");
  xmlhttp.open(method, url, true);

  xmlhttp.onerror = function () {
    console.log("** An error occurred during the transaction");
  };

  xmlhttp.onreadystatechange = function () {
    if (this.readyState === 4 && this.status === 200) {
      var exchangeData = xmlhttp.responseText;
      numberOfChecks++;
      var timeStamp = new Date();
      var exchangeObject = JSON.parse(exchangeData);
      var coins = ["FOAM", "ZEC", "LTC", "ETH", "XRP", "STR", "XMR", "DOGE", "BCHABC", "BCHSV"];
      var baseStableCoin = "USDC";
      analyzePrices(exchangeObject, baseStableCoin, coins, timeStamp);
      coins = ["BAT", "BNT", "DASH", "DOGE", "EOS", "ETC", "ETH", "GNT", "KNC", "LOOM", "LSK", "LTC", "MANA", "NXT", "QTUM", "REP", "SC", "SNT", "STR", "XMR", "XRP", "ZEC", "ZRX"];
      baseStableCoin = "USDT";
      analyzePrices(exchangeObject, baseStableCoin, coins, timeStamp);
      analyzeETHPrices(exchangeObject, timeStamp);
      analyzeXMRPrices(exchangeObject, timeStamp);
    }
  };

  xmlhttp.send();
  console.log("END: getPricingData");
}

function analyzePrices(exchangePrices, baseStableCoin, coins, timeStamp) {
  var timeStampStr = timeStamp.getTime();
  console.log("priceCheckCount:".concat(numberOfChecks, "|").concat(baseStableCoin, "|maxBuyArb:").concat(maxBuyArb, "|maxSellArb:").concat(maxSellArb)); // Check if buying the coin will be profitable.

  coins.forEach(function (curCoin) {
    var lowestAskBTC = exchangePrices["BTC_" + curCoin].lowestAsk;
    var highestBidUSDC = exchangePrices[baseStableCoin + "_" + curCoin].highestBid;
    var USDC_BTClowestAsk = exchangePrices[baseStableCoin + "_" + "BTC"].lowestAsk;
    var ArbRatio = highestBidUSDC / (lowestAskBTC * USDC_BTClowestAsk);
    var showMax = "";

    if (ArbRatio > maxBuyArb) {
      maxBuyArb = ArbRatio;
      showMax = "NewMax";
    }

    if (ArbRatio > 1.0) console.log("REC|".concat(timeStamp, "|").concat(timeStampStr, "|Buy|").concat(baseStableCoin, "|").concat(curCoin, "|ArbRatio:").concat(ArbRatio, "|").concat(showMax));

    if (ArbRatio > threshold) {
      console.log("Something dramatic needs to happen!");
    }
  }); // Check if selling the coin will be profitable

  coins.forEach(function (curCoin) {
    var BTC_curCoinBid = exchangePrices["BTC_" + curCoin].highestBid;
    var USDC_BTCBid = exchangePrices[baseStableCoin + "_" + "BTC"].highestBid;
    var USDC_curCoinAsk = exchangePrices[baseStableCoin + "_" + curCoin].lowestAsk;
    var AmtInit = 10000;
    var AmtFinal = AmtInit * BTC_curCoinBid * USDC_BTCBid / USDC_curCoinAsk;
    var ArbRatio = AmtFinal / AmtInit;
    var showMax = "";

    if (ArbRatio > maxSellArb) {
      maxSellArb = ArbRatio;
      showMax = "NewMax";
    }

    if (ArbRatio > 1.0) console.log("REC|".concat(timeStamp, "|").concat(timeStampStr, "|Sell|").concat(baseStableCoin, "|").concat(curCoin, "|ArbRatio:").concat(ArbRatio, "|").concat(showMax));

    if (ArbRatio > threshold) {
      console.log("Something dramatic needs to happen!");
    }
  });
}

function analyzeETHPrices(exchangePrices, timeStamp) {
  var timeStampStr = timeStamp.getTime();
  console.log("priceCheckCount:".concat(numberOfChecks, "|ETH|maxBuyArb:N/A|maxSellArbETH:").concat(maxSellArbETH));
  var coins = ["BAT", "BNT", "CVC", "EOS", "ETC", "GAS", "GNT", "KNC", "LOOM", "LSK", "MANA", "OMG", "QTUM", "REP", "SNT", "STEEM", "ZEC", "ZRX"]; // Check if selling the coin will be profitable

  coins.forEach(function (curCoin) {
    var ETH_curCoinBid = exchangePrices["ETH_" + curCoin].highestBid;
    var BTC_ETHBid = exchangePrices["BTC_ETH"].highestBid;
    var BTC_curCoinAsk = exchangePrices["BTC_" + curCoin].lowestAsk;
    var AmtInit = 1;
    var AmtFinal = AmtInit * BTC_ETHBid * ETH_curCoinBid / BTC_curCoinAsk;
    var ArbRatio = AmtFinal / AmtInit;
    var showMax = "";

    if (ArbRatio > maxSellArbETH) {
      maxSellArbETH = ArbRatio;
      showMax = "NewMax";
    }

    if (ArbRatio > 1.0) console.log("REC|".concat(timeStamp, "|").concat(timeStampStr, "|Sell|").concat(curCoin, "|ETH|ArbRatio:").concat(ArbRatio, "|").concat(showMax));

    if (ArbRatio > threshold) {
      var instructions = "ALERT: Sell ".concat(AmtInit, " ").concat(curCoin, " for ").concat(AmtInit * ETH_curCoinBid, " ETH, \n        then sell those ETH for ").concat(AmtInit * ETH_curCoinBid * BTC_ETHBid, " BTC,\n        then use those BTC to buy ").concat(AmtFinal, " ").concat(curCoin);
      console.log(instructions);
    }
  });
}

function analyzeXMRPrices(exchangePrices, timeStamp) {
  var timeStampStr = timeStamp.getTime();
  console.log("priceCheckCount:".concat(numberOfChecks, "|XMR|maxBuyArb:N/A|maxSellArbXMR:").concat(maxSellArbXMR));
  var coins = ["LTC", "ZEC", "NXT", "DASH", "BCN", "MAID"]; // Check if selling the coin will be profitable

  coins.forEach(function (curCoin) {
    var baseMarket = "XMR";
    var baseMarket_curCoinBid = exchangePrices[baseMarket + "_" + curCoin].highestBid;
    var BTC_baseMarketBid = exchangePrices["BTC" + "_" + baseMarket].highestBid;
    var BTC_curCoinAsk = exchangePrices["BTC" + "_" + curCoin].lowestAsk;
    var AmtInit = 1;
    var AmtFinal = AmtInit * BTC_baseMarketBid * baseMarket_curCoinBid / BTC_curCoinAsk;
    var ArbRatio = AmtFinal / AmtInit;
    var showMax = "";

    if (ArbRatio > maxSellArbXMR) {
      maxSellArbXMR = ArbRatio;
      showMax = "NewMax";
    }

    if (ArbRatio > 1.0) console.log("REC|".concat(timeStamp, "|").concat(timeStampStr, "|Sell|").concat(curCoin, "|XMR|ArbRatio:").concat(ArbRatio, "|").concat(showMax));

    if (ArbRatio > threshold) {
      var instructions = "ALERT: Sell ".concat(AmtInit, " ").concat(curCoin, " for ").concat(AmtInit * baseMarket_curCoinBid, " XMR, \n        then sell those XMR for ").concat(AmtInit * BTC_baseMarketBid * baseMarket_curCoinBid, " BTC,\n        then use those BTC to buy ").concat(AmtFinal, " ").concat(curCoin);
      console.log(instructions);
    }
  });
}
/* findPricingAnomolies
 * desc: Called periodically from setInterval.  Will check through the market pricing data and notify
 *       when any pricing anomolies are detected.
 */


function findPricingAnomolies() {
  console.log("BEGIN: findPricingAnomolies activated at:", new Date());
  getPricingData();
  console.log("END: findPricingAnomolies finished at:", new Date());
}

function runPoloCoinbaseCompare() {
  return _runPoloCoinbaseCompare.apply(this, arguments);
}

function _runPoloCoinbaseCompare() {
  _runPoloCoinbaseCompare = _asyncToGenerator(
  /*#__PURE__*/
  regeneratorRuntime.mark(function _callee() {
    var poloniexData, coinbaseDataZEC, coinbaseDataETH, coinbaseDataBTC;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return (0, _getCryptoData.getExchangeData)(poloniexURL);

          case 2:
            poloniexData = _context.sent;
            _context.next = 5;
            return (0, _getCryptoData.getExchangeData)(coinbaseURL + "/ZEC-USDC/book");

          case 5:
            coinbaseDataZEC = _context.sent;
            _context.next = 8;
            return (0, _getCryptoData.getExchangeData)(coinbaseURL + "/ETH-USDC/book");

          case 8:
            coinbaseDataETH = _context.sent;
            _context.next = 11;
            return (0, _getCryptoData.getExchangeData)(coinbaseURL + "/BTC-USDC/book");

          case 11:
            coinbaseDataBTC = _context.sent;
            (0, _comparePricingData.comparePoloniexCoinbase)(poloniexData, coinbaseDataZEC, "ZEC");
            (0, _comparePricingData.comparePoloniexCoinbase)(poloniexData, coinbaseDataETH, "ETH");
            (0, _comparePricingData.comparePoloniexCoinbase)(poloniexData, coinbaseDataBTC, "BTC");

          case 15:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));
  return _runPoloCoinbaseCompare.apply(this, arguments);
}

function runPoloBittrexCompare() {
  return _runPoloBittrexCompare.apply(this, arguments);
} // Set the default copare to run.


function _runPoloBittrexCompare() {
  _runPoloBittrexCompare = _asyncToGenerator(
  /*#__PURE__*/
  regeneratorRuntime.mark(function _callee2() {
    var poloniexData, bittrexALL, bittrexJSON, bittrexBTCCoins, baseMarkets;
    return regeneratorRuntime.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            numberOfChecks++; // Poloniex section - All coins from one request

            _context2.next = 3;
            return (0, _getCryptoData.getExchangeData)(poloniexURL);

          case 3:
            poloniexData = _context2.sent;
            _context2.next = 6;
            return (0, _getCryptoData.getExchangeData)(bittrexURLAll);

          case 6:
            bittrexALL = _context2.sent;
            bittrexJSON = JSON.parse(bittrexALL.exchangeData);
            bittrexBTCCoins = {
              BTC: ["ardr", "bat", "bnt", "burst", "cvc", "dash", "dgb", "doge", "etc", "eth", "fct", "game", "gnt", "lbc", "loom", "lsk", "ltc", "mana", "nav", "nmr", "nxt", "omg", "poly", "ppc", "qtum", "rep", "sbd", "sc", "snt", "steem", "storj", "xrp", "sys", "strat", "via", "vtc", "xcp", "xem", "xmr", "xrp", "zec", "zrx"],
              ETH: ["BAT", "BNT", "CVC", "ETC", "GNT", "MANA", "OMG", "QTUM", "REP", "SNT", "ZEC", "ZRX"],
              USDT: ["BAT", "BTC", "DASH"]
            };
            baseMarkets = ["BTC", "ETH", "USDT"];
            baseMarkets.forEach(function (baseMkt) {
              console.log("Processing basemkt:", baseMkt);
              var bittrexTrimmed = {};
              bittrexJSON.result.forEach(function (market) {
                bittrexBTCCoins[baseMkt].forEach(function (coin) {
                  var MarketName = baseMkt + "-" + coin.toUpperCase(); //console.log("MarketName:", MarketName);

                  if (market.MarketName === MarketName) {
                    bittrexTrimmed[MarketName] = market;
                  }
                });
              });
              var bittrexCompare = {};
              bittrexCompare.timeStamp = bittrexALL.timeStamp;
              bittrexCompare.exchangeData = bittrexTrimmed;
              (0, _comparePricingData.compareAllPoloniexBittrex)(poloniexData, bittrexCompare);
            });
            console.log("Compare cycle ".concat(numberOfChecks, " complete."));

          case 12:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2, this);
  }));
  return _runPoloBittrexCompare.apply(this, arguments);
}

var compareToRun = runPoloBittrexCompare;

if (process.argv.length >= 3) {
  if (process.argv[2] === "polointernal") {
    console.log("Running polointernal compare.");
    compareToRun = poloInternalCompare;
  } else {
    if (process.argv[2] === "polocoinbase") {
      compareToRun = runPoloCoinbaseCompare;
      console.log("Running PoloCoinbaseCompare compare.");
    } else {
      console.log("Running default polo bittrex compare.");
    }
  }
}

var newInteral = 1000 * (timeInSecondsBetweenPriceChecks + 20 * Math.random());
console.log("Setting the timer interval to ".concat(newInteral / 1000, " seconds."));
compareToRun();
intervalHandel = setInterval(compareToRun, newInteral);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hcHAuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsIlhNTEh0dHBSZXF1ZXN0IiwicG9sb25pZXhVUkwiLCJjb2luYmFzZVVSTCIsImJpdHRyZXhVUkwiLCJiaXR0cmV4VVJMQWxsIiwidGhyZXNob2xkIiwibnVtYmVyT2ZDaGVja3MiLCJpbnRlcnZhbEhhbmRlbCIsIm1heEJ1eUFyYiIsIm1heFNlbGxBcmIiLCJtYXhTZWxsQXJiRVRIIiwibWF4U2VsbEFyYlhNUiIsInRpbWVJblNlY29uZHNCZXR3ZWVuUHJpY2VDaGVja3MiLCJwb2xvSW50ZXJuYWxDb21wYXJlIiwiY29uc29sZSIsImxvZyIsInhtbGh0dHAiLCJtZXRob2QiLCJ1cmwiLCJvcGVuIiwib25lcnJvciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJleGNoYW5nZURhdGEiLCJyZXNwb25zZVRleHQiLCJ0aW1lU3RhbXAiLCJEYXRlIiwiZXhjaGFuZ2VPYmplY3QiLCJKU09OIiwicGFyc2UiLCJjb2lucyIsImJhc2VTdGFibGVDb2luIiwiYW5hbHl6ZVByaWNlcyIsImFuYWx5emVFVEhQcmljZXMiLCJhbmFseXplWE1SUHJpY2VzIiwic2VuZCIsImV4Y2hhbmdlUHJpY2VzIiwidGltZVN0YW1wU3RyIiwiZ2V0VGltZSIsImZvckVhY2giLCJjdXJDb2luIiwibG93ZXN0QXNrQlRDIiwibG93ZXN0QXNrIiwiaGlnaGVzdEJpZFVTREMiLCJoaWdoZXN0QmlkIiwiVVNEQ19CVENsb3dlc3RBc2siLCJBcmJSYXRpbyIsInNob3dNYXgiLCJCVENfY3VyQ29pbkJpZCIsIlVTRENfQlRDQmlkIiwiVVNEQ19jdXJDb2luQXNrIiwiQW10SW5pdCIsIkFtdEZpbmFsIiwiRVRIX2N1ckNvaW5CaWQiLCJCVENfRVRIQmlkIiwiQlRDX2N1ckNvaW5Bc2siLCJpbnN0cnVjdGlvbnMiLCJiYXNlTWFya2V0IiwiYmFzZU1hcmtldF9jdXJDb2luQmlkIiwiQlRDX2Jhc2VNYXJrZXRCaWQiLCJmaW5kUHJpY2luZ0Fub21vbGllcyIsImdldFByaWNpbmdEYXRhIiwicnVuUG9sb0NvaW5iYXNlQ29tcGFyZSIsInBvbG9uaWV4RGF0YSIsImNvaW5iYXNlRGF0YVpFQyIsImNvaW5iYXNlRGF0YUVUSCIsImNvaW5iYXNlRGF0YUJUQyIsInJ1blBvbG9CaXR0cmV4Q29tcGFyZSIsImJpdHRyZXhBTEwiLCJiaXR0cmV4SlNPTiIsImJpdHRyZXhCVENDb2lucyIsIkJUQyIsIkVUSCIsIlVTRFQiLCJiYXNlTWFya2V0cyIsImJhc2VNa3QiLCJiaXR0cmV4VHJpbW1lZCIsInJlc3VsdCIsIm1hcmtldCIsImNvaW4iLCJNYXJrZXROYW1lIiwidG9VcHBlckNhc2UiLCJiaXR0cmV4Q29tcGFyZSIsImNvbXBhcmVUb1J1biIsInByb2Nlc3MiLCJhcmd2IiwibGVuZ3RoIiwibmV3SW50ZXJhbCIsIk1hdGgiLCJyYW5kb20iLCJzZXRJbnRlcnZhbCJdLCJtYXBwaW5ncyI6Ijs7QUFFQTs7QUFDQTs7Ozs7O0FBSEFBLE9BQU8sQ0FBQyxpQkFBRCxDQUFQOztBQUtBLElBQUlDLGNBQWMsR0FBR0QsT0FBTyxDQUFDLGdCQUFELENBQVAsQ0FBMEJDLGNBQS9DOztBQUVBLElBQU1DLFdBQVcsR0FBRyxrREFBcEI7QUFDQSxJQUFNQyxXQUFXLEdBQUcsdUNBQXBCO0FBQ0EsSUFBTUMsVUFBVSxHQUFHLHNEQUFuQjtBQUNBLElBQU1DLGFBQWEsR0FBRyx3REFBdEI7QUFDQSxJQUFNQyxTQUFTLEdBQUcsSUFBbEI7QUFDQSxJQUFJQyxjQUFjLEdBQUcsQ0FBckI7QUFDQSxJQUFJQyxjQUFjLEdBQUcsQ0FBQyxDQUF0QjtBQUNBLElBQUlDLFNBQVMsR0FBRyxDQUFoQjtBQUNBLElBQUlDLFVBQVUsR0FBRyxDQUFqQjtBQUNBLElBQUlDLGFBQWEsR0FBRyxDQUFwQjtBQUNBLElBQUlDLGFBQWEsR0FBRyxDQUFwQjtBQUVBLElBQU1DLCtCQUErQixHQUFHLEVBQXhDOztBQUVBLFNBQVNDLG1CQUFULEdBQStC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QUF6QixFQUE0QjtBQUMxQixNQUFJRixPQUFPLENBQUNDLElBQVIsQ0FBYSxDQUFiLE1BQWtCLGNBQXRCLEVBQXNDO0FBQ3BDeEUsSUFBQUEsT0FBTyxDQUFDQyxHQUFSO0FBQ0FxRSxJQUFBQSxZQUFZLEdBQUd2RSxtQkFBZjtBQUNELEdBSEQsTUFJSztBQUNILFFBQUl3RSxPQUFPLENBQUNDLElBQVIsQ0FBYSxDQUFiLE1BQWtCLGNBQXRCLEVBQXNDO0FBQ3BDRixNQUFBQSxZQUFZLEdBQUdyQixzQkFBZjtBQUNBakQsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksc0NBQVo7QUFDRCxLQUhELE1BSUs7QUFDSEQsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksdUNBQVo7QUFDRDtBQUNGO0FBQ0Y7O0FBQ0QsSUFBSXlFLFVBQVUsR0FBRyxRQUFNNUUsK0JBQStCLEdBQUcsS0FBRzZFLElBQUksQ0FBQ0MsTUFBTCxFQUEzQyxDQUFqQjtBQUNBNUUsT0FBTyxDQUFDQyxHQUFSLHlDQUE2Q3lFLFVBQVUsR0FBQyxJQUF4RDtBQUNBSixZQUFZO0FBQ1o3RSxjQUFjLEdBQUdvRixXQUFXLENBQUNQLFlBQUQsRUFBZUksVUFBZixDQUE1QiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoXCJAYmFiZWwvcG9seWZpbGxcIik7XG5cbmltcG9ydCB7Z2V0RXhjaGFuZ2VEYXRhfSBmcm9tIFwiLi91dGlscy9nZXRDcnlwdG9EYXRhLmpzXCI7XG5pbXBvcnQge2NvbXBhcmVQb2xvbmlleENvaW5iYXNlLCBjb21wYXJlQWxsUG9sb25pZXhCaXR0cmV4fSBmcm9tIFwiLi91dGlscy9jb21wYXJlUHJpY2luZ0RhdGFcIjtcblxubGV0IFhNTEh0dHBSZXF1ZXN0ID0gcmVxdWlyZShcInhtbGh0dHByZXF1ZXN0XCIpLlhNTEh0dHBSZXF1ZXN0O1xuXG5jb25zdCBwb2xvbmlleFVSTCA9IFwiaHR0cHM6Ly9wb2xvbmlleC5jb20vcHVibGljP2NvbW1hbmQ9cmV0dXJuVGlja2VyXCI7IFxuY29uc3QgY29pbmJhc2VVUkwgPSBcImh0dHBzOi8vYXBpLnByby5jb2luYmFzZS5jb20vcHJvZHVjdHNcIjsgXG5jb25zdCBiaXR0cmV4VVJMID0gXCJodHRwczovL2JpdHRyZXguY29tL2FwaS92MS4xL3B1YmxpYy9nZXRtYXJrZXRzdW1tYXJ5XCI7XG5jb25zdCBiaXR0cmV4VVJMQWxsID0gXCJodHRwczovL2JpdHRyZXguY29tL2FwaS92MS4xL3B1YmxpYy9nZXRtYXJrZXRzdW1tYXJpZXNcIjtcbmNvbnN0IHRocmVzaG9sZCA9IDEuMDE7XG5sZXQgbnVtYmVyT2ZDaGVja3MgPSAwO1xubGV0IGludGVydmFsSGFuZGVsID0gLTE7XG5sZXQgbWF4QnV5QXJiID0gMDtcbmxldCBtYXhTZWxsQXJiID0gMDtcbmxldCBtYXhTZWxsQXJiRVRIID0gMDtcbmxldCBtYXhTZWxsQXJiWE1SID0gMDtcblxuY29uc3QgdGltZUluU2Vjb25kc0JldHdlZW5QcmljZUNoZWNrcyA9IDE1O1xuXG5mdW5jdGlvbiBwb2xvSW50ZXJuYWxDb21wYXJlKCkge1xuXG4gIGNvbnNvbGUubG9nKFwiQkVHSU46IGdldFByaWNpbmdEYXRhXCIpO1xuICBsZXQgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgIG1ldGhvZCA9IFwiR0VUXCIsXG4gICAgdXJsID0gcG9sb25pZXhVUkw7XG5cbiAgY29uc29sZS5sb2coXCJMb2FkaW5nIGRhdGEgZnJvbSA6IEh0dHAuc2VuZChcIiwgdXJsLCBcIilcIik7XG4gIHhtbGh0dHAub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gIHhtbGh0dHAub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZyhcIioqIEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgdHJhbnNhY3Rpb25cIik7XG4gIH07XG4gIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZT09PTQgJiYgdGhpcy5zdGF0dXM9PT0yMDApIHtcbiAgICAgIGxldCBleGNoYW5nZURhdGEgPSB4bWxodHRwLnJlc3BvbnNlVGV4dDtcbiAgICAgIG51bWJlck9mQ2hlY2tzKys7XG4gICAgICBsZXQgdGltZVN0YW1wID0gbmV3IERhdGUoKTtcbiAgICAgIGxldCBleGNoYW5nZU9iamVjdCA9IEpTT04ucGFyc2UoZXhjaGFuZ2VEYXRhKTtcbiAgICAgIGxldCBjb2lucyA9IFtcIkZPQU1cIiwgXCJaRUNcIiwgXCJMVENcIiwgXCJFVEhcIiwgXCJYUlBcIiwgXCJTVFJcIiwgXCJYTVJcIiwgXCJET0dFXCIsIFwiQkNIQUJDXCIsIFwiQkNIU1ZcIl07XG4gICAgICBsZXQgYmFzZVN0YWJsZUNvaW4gPSBcIlVTRENcIjtcbiAgICAgIGFuYWx5emVQcmljZXMoZXhjaGFuZ2VPYmplY3QsIGJhc2VTdGFibGVDb2luLCBjb2lucywgdGltZVN0YW1wKTtcbiAgICAgIGNvaW5zID0gW1wiQkFUXCIsIFwiQk5UXCIsIFwiREFTSFwiLCBcIkRPR0VcIiwgXCJFT1NcIiwgXCJFVENcIiwgXCJFVEhcIiwgXCJHTlRcIiwgXCJLTkNcIiwgXCJMT09NXCIsIFwiTFNLXCIsXG4gICAgICAgIFwiTFRDXCIsIFwiTUFOQVwiLCBcIk5YVFwiLCBcIlFUVU1cIiwgXCJSRVBcIiwgXCJTQ1wiLCBcIlNOVFwiLCBcIlNUUlwiLCBcIlhNUlwiLCBcIlhSUFwiLCBcIlpFQ1wiLCBcIlpSWFwiXTtcbiAgICAgIGJhc2VTdGFibGVDb2luID0gXCJVU0RUXCI7IFxuICAgICAgYW5hbHl6ZVByaWNlcyhleGNoYW5nZU9iamVjdCwgYmFzZVN0YWJsZUNvaW4sIGNvaW5zLCB0aW1lU3RhbXApO1xuICAgICAgYW5hbHl6ZUVUSFByaWNlcyhleGNoYW5nZU9iamVjdCwgdGltZVN0YW1wKTtcbiAgICAgIGFuYWx5emVYTVJQcmljZXMoZXhjaGFuZ2VPYmplY3QsIHRpbWVTdGFtcCk7XG4gICAgfVxuICB9XG4gIHhtbGh0dHAuc2VuZCgpO1xuICBjb25zb2xlLmxvZyhcIkVORDogZ2V0UHJpY2luZ0RhdGFcIik7XG59XG5cbmZ1bmN0aW9uIGFuYWx5emVQcmljZXMoZXhjaGFuZ2VQcmljZXMsIGJhc2VTdGFibGVDb2luLCBjb2lucywgdGltZVN0YW1wKSB7XG5cbiAgbGV0IHRpbWVTdGFtcFN0ciA9IHRpbWVTdGFtcC5nZXRUaW1lKCk7XG4gIGNvbnNvbGUubG9nKGBwcmljZUNoZWNrQ291bnQ6JHtudW1iZXJPZkNoZWNrc318JHtiYXNlU3RhYmxlQ29pbn18bWF4QnV5QXJiOiR7bWF4QnV5QXJifXxtYXhTZWxsQXJiOiR7bWF4U2VsbEFyYn1gKTtcbiAgLy8gQ2hlY2sgaWYgYnV5aW5nIHRoZSBjb2luIHdpbGwgYmUgcHJvZml0YWJsZS5cbiAgY29pbnMuZm9yRWFjaChjdXJDb2luID0+IHtcbiAgICBsZXQgbG93ZXN0QXNrQlRDID0gZXhjaGFuZ2VQcmljZXNbXCJCVENfXCIgKyBjdXJDb2luXS5sb3dlc3RBc2s7XG4gICAgbGV0IGhpZ2hlc3RCaWRVU0RDID0gZXhjaGFuZ2VQcmljZXNbYmFzZVN0YWJsZUNvaW4gKyBcIl9cIiArIGN1ckNvaW5dLmhpZ2hlc3RCaWQ7XG4gICAgbGV0IFVTRENfQlRDbG93ZXN0QXNrID0gZXhjaGFuZ2VQcmljZXNbYmFzZVN0YWJsZUNvaW4gKyBcIl9cIiArIFwiQlRDXCJdLmxvd2VzdEFzaztcbiAgICBsZXQgQXJiUmF0aW8gPSBoaWdoZXN0QmlkVVNEQyAvICggbG93ZXN0QXNrQlRDICogIFVTRENfQlRDbG93ZXN0QXNrKTtcbiAgICBsZXQgc2hvd01heCA9IFwiXCI7XG4gICAgaWYgKEFyYlJhdGlvPm1heEJ1eUFyYikge1xuICAgICAgbWF4QnV5QXJiID0gQXJiUmF0aW87XG4gICAgICBzaG93TWF4ID0gXCJOZXdNYXhcIjtcbiAgICB9XG4gICAgaWYgKEFyYlJhdGlvPjEuMClcbiAgICAgIGNvbnNvbGUubG9nKGBSRUN8JHt0aW1lU3RhbXB9fCR7dGltZVN0YW1wU3RyfXxCdXl8JHtiYXNlU3RhYmxlQ29pbn18JHtjdXJDb2lufXxBcmJSYXRpbzoke0FyYlJhdGlvfXwke3Nob3dNYXh9YCk7XG4gICAgaWYgKEFyYlJhdGlvID4gdGhyZXNob2xkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlNvbWV0aGluZyBkcmFtYXRpYyBuZWVkcyB0byBoYXBwZW4hXCIpO1xuICAgIH1cbiAgfSk7XG4gIC8vIENoZWNrIGlmIHNlbGxpbmcgdGhlIGNvaW4gd2lsbCBiZSBwcm9maXRhYmxlXG4gIGNvaW5zLmZvckVhY2goY3VyQ29pbiA9PiB7XG4gICAgbGV0IEJUQ19jdXJDb2luQmlkID0gZXhjaGFuZ2VQcmljZXNbXCJCVENfXCIrY3VyQ29pbl0uaGlnaGVzdEJpZDtcbiAgICBsZXQgVVNEQ19CVENCaWQgPSBleGNoYW5nZVByaWNlc1tiYXNlU3RhYmxlQ29pbiArIFwiX1wiICsgXCJCVENcIl0uaGlnaGVzdEJpZDtcbiAgICBsZXQgVVNEQ19jdXJDb2luQXNrID0gZXhjaGFuZ2VQcmljZXNbYmFzZVN0YWJsZUNvaW4gKyBcIl9cIiArY3VyQ29pbl0ubG93ZXN0QXNrO1xuICAgIGxldCBBbXRJbml0ID0gMTAwMDA7XG4gICAgbGV0IEFtdEZpbmFsID0gQW10SW5pdCpCVENfY3VyQ29pbkJpZCpVU0RDX0JUQ0JpZC9VU0RDX2N1ckNvaW5Bc2s7XG4gICAgbGV0IEFyYlJhdGlvID0gQW10RmluYWwvQW10SW5pdDtcbiAgICBsZXQgc2hvd01heCA9IFwiXCI7XG4gICAgaWYgKEFyYlJhdGlvPm1heFNlbGxBcmIpIHtcbiAgICAgIG1heFNlbGxBcmIgPSBBcmJSYXRpbztcbiAgICAgIHNob3dNYXggPSBcIk5ld01heFwiO1xuICAgIH1cbiAgICBpZiAoQXJiUmF0aW8+MS4wKVxuICAgICAgY29uc29sZS5sb2coYFJFQ3wke3RpbWVTdGFtcH18JHt0aW1lU3RhbXBTdHJ9fFNlbGx8JHtiYXNlU3RhYmxlQ29pbn18JHtjdXJDb2lufXxBcmJSYXRpbzoke0FyYlJhdGlvfXwke3Nob3dNYXh9YCk7XG4gICAgaWYgKEFyYlJhdGlvID4gdGhyZXNob2xkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlNvbWV0aGluZyBkcmFtYXRpYyBuZWVkcyB0byBoYXBwZW4hXCIpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFuYWx5emVFVEhQcmljZXMoZXhjaGFuZ2VQcmljZXMsIHRpbWVTdGFtcCkge1xuXG4gIGxldCB0aW1lU3RhbXBTdHIgPSB0aW1lU3RhbXAuZ2V0VGltZSgpO1xuICBjb25zb2xlLmxvZyhgcHJpY2VDaGVja0NvdW50OiR7bnVtYmVyT2ZDaGVja3N9fEVUSHxtYXhCdXlBcmI6Ti9BfG1heFNlbGxBcmJFVEg6JHttYXhTZWxsQXJiRVRIfWApO1xuICBsZXQgY29pbnMgPSBbXCJCQVRcIiwgXCJCTlRcIiwgXCJDVkNcIiwgXCJFT1NcIiwgXCJFVENcIiwgXCJHQVNcIiwgXCJHTlRcIiwgXCJLTkNcIiwgXCJMT09NXCIsIFwiTFNLXCIsIFxuICAgIFwiTUFOQVwiLCBcIk9NR1wiLCBcIlFUVU1cIiwgXCJSRVBcIiwgXCJTTlRcIiwgXCJTVEVFTVwiLCBcIlpFQ1wiLCBcIlpSWFwiXTtcbiAgLy8gQ2hlY2sgaWYgc2VsbGluZyB0aGUgY29pbiB3aWxsIGJlIHByb2ZpdGFibGVcbiAgY29pbnMuZm9yRWFjaChjdXJDb2luID0+IHtcbiAgICBsZXQgRVRIX2N1ckNvaW5CaWQgPSBleGNoYW5nZVByaWNlc1tcIkVUSF9cIitjdXJDb2luXS5oaWdoZXN0QmlkO1xuICAgIGxldCBCVENfRVRIQmlkID0gZXhjaGFuZ2VQcmljZXNbXCJCVENfRVRIXCJdLmhpZ2hlc3RCaWQ7XG4gICAgbGV0IEJUQ19jdXJDb2luQXNrID0gZXhjaGFuZ2VQcmljZXNbXCJCVENfXCIrY3VyQ29pbl0ubG93ZXN0QXNrO1xuICAgIGxldCBBbXRJbml0ID0gMTtcbiAgICBsZXQgQW10RmluYWwgPSBBbXRJbml0KkJUQ19FVEhCaWQqRVRIX2N1ckNvaW5CaWQvQlRDX2N1ckNvaW5Bc2s7XG4gICAgbGV0IEFyYlJhdGlvID0gQW10RmluYWwvQW10SW5pdDtcbiAgICBsZXQgc2hvd01heCA9IFwiXCI7XG4gICAgaWYgKEFyYlJhdGlvPm1heFNlbGxBcmJFVEgpIHtcbiAgICAgIG1heFNlbGxBcmJFVEggPSBBcmJSYXRpbztcbiAgICAgIHNob3dNYXggPSBcIk5ld01heFwiO1xuICAgIH1cbiAgICBpZiAoQXJiUmF0aW8+MS4wKVxuICAgICAgY29uc29sZS5sb2coYFJFQ3wke3RpbWVTdGFtcH18JHt0aW1lU3RhbXBTdHJ9fFNlbGx8JHtjdXJDb2lufXxFVEh8QXJiUmF0aW86JHtBcmJSYXRpb318JHtzaG93TWF4fWApO1xuICAgIGlmIChBcmJSYXRpbyA+IHRocmVzaG9sZCkge1xuICAgICAgbGV0IGluc3RydWN0aW9ucyA9IGBBTEVSVDogU2VsbCAke0FtdEluaXR9ICR7Y3VyQ29pbn0gZm9yICR7QW10SW5pdCpFVEhfY3VyQ29pbkJpZH0gRVRILCBcbiAgICAgICAgdGhlbiBzZWxsIHRob3NlIEVUSCBmb3IgJHtBbXRJbml0KkVUSF9jdXJDb2luQmlkKkJUQ19FVEhCaWR9IEJUQyxcbiAgICAgICAgdGhlbiB1c2UgdGhvc2UgQlRDIHRvIGJ1eSAke0FtdEZpbmFsfSAke2N1ckNvaW59YDtcbiAgICAgIGNvbnNvbGUubG9nKGluc3RydWN0aW9ucyk7XG4gICAgfVxuXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhbmFseXplWE1SUHJpY2VzKGV4Y2hhbmdlUHJpY2VzLCB0aW1lU3RhbXApIHtcblxuICBsZXQgdGltZVN0YW1wU3RyID0gdGltZVN0YW1wLmdldFRpbWUoKTtcbiAgY29uc29sZS5sb2coYHByaWNlQ2hlY2tDb3VudDoke251bWJlck9mQ2hlY2tzfXxYTVJ8bWF4QnV5QXJiOk4vQXxtYXhTZWxsQXJiWE1SOiR7bWF4U2VsbEFyYlhNUn1gKTtcbiAgbGV0IGNvaW5zID0gW1wiTFRDXCIsIFwiWkVDXCIsIFwiTlhUXCIsIFwiREFTSFwiLCBcIkJDTlwiLCBcIk1BSURcIl07XG4gIC8vIENoZWNrIGlmIHNlbGxpbmcgdGhlIGNvaW4gd2lsbCBiZSBwcm9maXRhYmxlXG4gIGNvaW5zLmZvckVhY2goY3VyQ29pbiA9PiB7XG4gICAgbGV0IGJhc2VNYXJrZXQgPSBcIlhNUlwiO1xuICAgIGxldCBiYXNlTWFya2V0X2N1ckNvaW5CaWQgPSBleGNoYW5nZVByaWNlc1tiYXNlTWFya2V0ICsgXCJfXCIgKyBjdXJDb2luXS5oaWdoZXN0QmlkO1xuICAgIGxldCBCVENfYmFzZU1hcmtldEJpZCA9IGV4Y2hhbmdlUHJpY2VzW1wiQlRDXCIgKyBcIl9cIiArIGJhc2VNYXJrZXRdLmhpZ2hlc3RCaWQ7XG4gICAgbGV0IEJUQ19jdXJDb2luQXNrID0gZXhjaGFuZ2VQcmljZXNbXCJCVENcIiArIFwiX1wiICsgY3VyQ29pbl0ubG93ZXN0QXNrO1xuICAgIGxldCBBbXRJbml0ID0gMTtcbiAgICBsZXQgQW10RmluYWwgPSBBbXRJbml0KkJUQ19iYXNlTWFya2V0QmlkKmJhc2VNYXJrZXRfY3VyQ29pbkJpZC9CVENfY3VyQ29pbkFzaztcbiAgICBsZXQgQXJiUmF0aW8gPSBBbXRGaW5hbC9BbXRJbml0O1xuICAgIGxldCBzaG93TWF4ID0gXCJcIjtcbiAgICBpZiAoQXJiUmF0aW8+bWF4U2VsbEFyYlhNUikge1xuICAgICAgbWF4U2VsbEFyYlhNUiA9IEFyYlJhdGlvO1xuICAgICAgc2hvd01heCA9IFwiTmV3TWF4XCI7XG4gICAgfVxuICAgIGlmIChBcmJSYXRpbz4xLjApXG4gICAgICBjb25zb2xlLmxvZyhgUkVDfCR7dGltZVN0YW1wfXwke3RpbWVTdGFtcFN0cn18U2VsbHwke2N1ckNvaW59fFhNUnxBcmJSYXRpbzoke0FyYlJhdGlvfXwke3Nob3dNYXh9YCk7XG4gICAgaWYgKEFyYlJhdGlvID4gdGhyZXNob2xkKSB7XG4gICAgICBsZXQgaW5zdHJ1Y3Rpb25zID0gYEFMRVJUOiBTZWxsICR7QW10SW5pdH0gJHtjdXJDb2lufSBmb3IgJHtBbXRJbml0KmJhc2VNYXJrZXRfY3VyQ29pbkJpZH0gWE1SLCBcbiAgICAgICAgdGhlbiBzZWxsIHRob3NlIFhNUiBmb3IgJHtBbXRJbml0KkJUQ19iYXNlTWFya2V0QmlkKmJhc2VNYXJrZXRfY3VyQ29pbkJpZH0gQlRDLFxuICAgICAgICB0aGVuIHVzZSB0aG9zZSBCVEMgdG8gYnV5ICR7QW10RmluYWx9ICR7Y3VyQ29pbn1gO1xuICAgICAgY29uc29sZS5sb2coaW5zdHJ1Y3Rpb25zKTtcbiAgICB9XG5cbiAgfSk7XG59XG5cbi8qIGZpbmRQcmljaW5nQW5vbW9saWVzXG4gKiBkZXNjOiBDYWxsZWQgcGVyaW9kaWNhbGx5IGZyb20gc2V0SW50ZXJ2YWwuICBXaWxsIGNoZWNrIHRocm91Z2ggdGhlIG1hcmtldCBwcmljaW5nIGRhdGEgYW5kIG5vdGlmeVxuICogICAgICAgd2hlbiBhbnkgcHJpY2luZyBhbm9tb2xpZXMgYXJlIGRldGVjdGVkLlxuICovXG5mdW5jdGlvbiBmaW5kUHJpY2luZ0Fub21vbGllcygpIHtcblxuICBjb25zb2xlLmxvZyhcIkJFR0lOOiBmaW5kUHJpY2luZ0Fub21vbGllcyBhY3RpdmF0ZWQgYXQ6XCIsIG5ldyBEYXRlKCkpO1xuICBnZXRQcmljaW5nRGF0YSgpO1xuICBjb25zb2xlLmxvZyhcIkVORDogZmluZFByaWNpbmdBbm9tb2xpZXMgZmluaXNoZWQgYXQ6XCIsIG5ldyBEYXRlKCkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBydW5Qb2xvQ29pbmJhc2VDb21wYXJlKCkge1xuICBsZXQgcG9sb25pZXhEYXRhID0gYXdhaXQgZ2V0RXhjaGFuZ2VEYXRhKHBvbG9uaWV4VVJMKTtcbiAgbGV0IGNvaW5iYXNlRGF0YVpFQyA9IGF3YWl0IGdldEV4Y2hhbmdlRGF0YShjb2luYmFzZVVSTCtcIi9aRUMtVVNEQy9ib29rXCIpO1xuICBsZXQgY29pbmJhc2VEYXRhRVRIID0gYXdhaXQgZ2V0RXhjaGFuZ2VEYXRhKGNvaW5iYXNlVVJMK1wiL0VUSC1VU0RDL2Jvb2tcIik7XG4gIGxldCBjb2luYmFzZURhdGFCVEMgPSBhd2FpdCBnZXRFeGNoYW5nZURhdGEoY29pbmJhc2VVUkwrXCIvQlRDLVVTREMvYm9va1wiKTtcbiAgY29tcGFyZVBvbG9uaWV4Q29pbmJhc2UocG9sb25pZXhEYXRhLCBjb2luYmFzZURhdGFaRUMsIFwiWkVDXCIpO1xuICBjb21wYXJlUG9sb25pZXhDb2luYmFzZShwb2xvbmlleERhdGEsIGNvaW5iYXNlRGF0YUVUSCwgXCJFVEhcIik7XG4gIGNvbXBhcmVQb2xvbmlleENvaW5iYXNlKHBvbG9uaWV4RGF0YSwgY29pbmJhc2VEYXRhQlRDLCBcIkJUQ1wiKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcnVuUG9sb0JpdHRyZXhDb21wYXJlKCkge1xuXG4gIG51bWJlck9mQ2hlY2tzKys7XG4gIC8vIFBvbG9uaWV4IHNlY3Rpb24gLSBBbGwgY29pbnMgZnJvbSBvbmUgcmVxdWVzdFxuICBsZXQgcG9sb25pZXhEYXRhID0gYXdhaXQgZ2V0RXhjaGFuZ2VEYXRhKHBvbG9uaWV4VVJMKTtcbiAgLy8gQml0dHJleCBzZWN0aW9uIC0gQWxsIGNvaW5zIGZyb20gb25lIHJlcXVlc3QuXG4gIC8vIEJpdHRyZXggbWFya2V0IHN1bW1hcnkgLSBBbGwgY29pbnMgZnJvbSBvbmUgcmVxdWVzdC5cbiAgbGV0IGJpdHRyZXhBTEwgPSBhd2FpdCBnZXRFeGNoYW5nZURhdGEoYml0dHJleFVSTEFsbCk7XG4gIGxldCBiaXR0cmV4SlNPTiA9IEpTT04ucGFyc2UoYml0dHJleEFMTC5leGNoYW5nZURhdGEpO1xuICBsZXQgYml0dHJleEJUQ0NvaW5zID0ge1xuICAgIEJUQzogW1wiYXJkclwiLCBcImJhdFwiLCBcImJudFwiLCBcImJ1cnN0XCIsIFwiY3ZjXCIsIFwiZGFzaFwiLCBcImRnYlwiLCBcImRvZ2VcIixcbiAgICBcImV0Y1wiLCBcImV0aFwiLCBcImZjdFwiLCBcImdhbWVcIiwgXCJnbnRcIiwgXCJsYmNcIiwgXCJsb29tXCIsIFwibHNrXCIsIFwibHRjXCIsIFwibWFuYVwiLCBcIm5hdlwiLCBcIm5tclwiLCBcIm54dFwiLCBcIm9tZ1wiLFxuICAgIFwicG9seVwiLCBcInBwY1wiLCBcInF0dW1cIiwgXCJyZXBcIiwgXCJzYmRcIiwgXCJzY1wiLCBcInNudFwiLCBcInN0ZWVtXCIsIFwic3RvcmpcIiwgXCJ4cnBcIiwgXCJzeXNcIiwgXCJzdHJhdFwiLCBcInZpYVwiLCBcInZ0Y1wiLFxuICAgIFwieGNwXCIsIFwieGVtXCIsIFwieG1yXCIsIFwieHJwXCIsIFwiemVjXCIsIFwienJ4XCJdLFxuICAgIEVUSDogW1wiQkFUXCIsIFwiQk5UXCIsIFwiQ1ZDXCIsIFwiRVRDXCIsIFwiR05UXCIsIFwiTUFOQVwiLCBcIk9NR1wiLCBcIlFUVU1cIiwgXCJSRVBcIiwgXCJTTlRcIiwgXCJaRUNcIiwgXCJaUlhcIl0sXG4gICAgVVNEVDogW1wiQkFUXCIsIFwiQlRDXCIsIFwiREFTSFwiXVxuICB9O1xuICBsZXQgYmFzZU1hcmtldHMgPSBbXCJCVENcIiwgXCJFVEhcIiwgXCJVU0RUXCJdO1xuICBiYXNlTWFya2V0cy5mb3JFYWNoKGJhc2VNa3QgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiUHJvY2Vzc2luZyBiYXNlbWt0OlwiLCBiYXNlTWt0KTtcbiAgICBsZXQgYml0dHJleFRyaW1tZWQgPSB7fTtcbiAgICBiaXR0cmV4SlNPTi5yZXN1bHQuZm9yRWFjaChtYXJrZXQgPT4ge1xuICAgICAgYml0dHJleEJUQ0NvaW5zW2Jhc2VNa3RdLmZvckVhY2goY29pbiA9PiB7XG4gICAgICAgIGxldCBNYXJrZXROYW1lID0gYmFzZU1rdCtcIi1cIitjb2luLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJNYXJrZXROYW1lOlwiLCBNYXJrZXROYW1lKTtcbiAgICAgICAgaWYgKG1hcmtldC5NYXJrZXROYW1lPT09TWFya2V0TmFtZSkge1xuICAgICAgICAgIGJpdHRyZXhUcmltbWVkW01hcmtldE5hbWVdID0gbWFya2V0O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBsZXQgYml0dHJleENvbXBhcmUgPSB7fTtcbiAgICBiaXR0cmV4Q29tcGFyZS50aW1lU3RhbXAgPSBiaXR0cmV4QUxMLnRpbWVTdGFtcDtcbiAgICBiaXR0cmV4Q29tcGFyZS5leGNoYW5nZURhdGEgPSBiaXR0cmV4VHJpbW1lZDtcbiAgICBjb21wYXJlQWxsUG9sb25pZXhCaXR0cmV4KHBvbG9uaWV4RGF0YSwgYml0dHJleENvbXBhcmUpO1xuICB9KTtcbiAgY29uc29sZS5sb2coYENvbXBhcmUgY3ljbGUgJHtudW1iZXJPZkNoZWNrc30gY29tcGxldGUuYClcbn1cblxuLy8gU2V0IHRoZSBkZWZhdWx0IGNvcGFyZSB0byBydW4uXG5sZXQgY29tcGFyZVRvUnVuID0gIHJ1blBvbG9CaXR0cmV4Q29tcGFyZTtcbmlmIChwcm9jZXNzLmFyZ3YubGVuZ3RoPj0zKSB7XG4gIGlmIChwcm9jZXNzLmFyZ3ZbMl09PT1cInBvbG9pbnRlcm5hbFwiKSB7XG4gICAgY29uc29sZS5sb2coYFJ1bm5pbmcgcG9sb2ludGVybmFsIGNvbXBhcmUuYCk7XG4gICAgY29tcGFyZVRvUnVuID0gcG9sb0ludGVybmFsQ29tcGFyZTtcbiAgfVxuICBlbHNlIHtcbiAgICBpZiAocHJvY2Vzcy5hcmd2WzJdPT09XCJwb2xvY29pbmJhc2VcIikge1xuICAgICAgY29tcGFyZVRvUnVuID0gcnVuUG9sb0NvaW5iYXNlQ29tcGFyZTtcbiAgICAgIGNvbnNvbGUubG9nKFwiUnVubmluZyBQb2xvQ29pbmJhc2VDb21wYXJlIGNvbXBhcmUuXCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiUnVubmluZyBkZWZhdWx0IHBvbG8gYml0dHJleCBjb21wYXJlLlwiKTtcbiAgICB9XG4gIH1cbn1cbmxldCBuZXdJbnRlcmFsID0gMTAwMCoodGltZUluU2Vjb25kc0JldHdlZW5QcmljZUNoZWNrcyArIDIwKk1hdGgucmFuZG9tKCkpO1xuY29uc29sZS5sb2coYFNldHRpbmcgdGhlIHRpbWVyIGludGVydmFsIHRvICR7bmV3SW50ZXJhbC8xMDAwfSBzZWNvbmRzLmAgKTtcbmNvbXBhcmVUb1J1bigpO1xuaW50ZXJ2YWxIYW5kZWwgPSBzZXRJbnRlcnZhbChjb21wYXJlVG9SdW4sIG5ld0ludGVyYWwpO1xuIl19