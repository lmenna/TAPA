"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.comparePoloniexCoinbase = comparePoloniexCoinbase;
exports.compareAllPoloniexBittrex = compareAllPoloniexBittrex;

var _sendEMail = require("./sendEMail");

/* comparePricingData.js
 * Consolidates function to compare crypto markets looking for significant arbitrage opportunities.
 * Sends notifications when large arbitrage is detected.
 */
// Set this to be a clear trading opportunity
var arbEmailThresholdPercent = 1.25; // Set this to be the fees associated with trading

var arbReportingThresholdPercent = 0.0;
/* formatTimestamp
 * desc: Simple utility to truncate the output of long time stamps to include only the date and time parts.
 */

function formatTimestamp(timeStamp) {
  return timeStamp.toString().slice(0, 25);
}
/* comparePoloniexCoinbase
 * desc: Main function called to compare the Poloniex and Coinbase crypto markets.
 *       This function is exported and called be app.js
 */


function comparePoloniexCoinbase(poloData, cbData, coin) {
  var poloJSON = JSON.parse(poloData.exchangeData);
  var cbJSON = JSON.parse(cbData.exchangeData);
  var timeStamp = new Date();
  console.log("".concat(formatTimestamp(timeStamp), ": PoloTime-CBTime: ").concat(poloData.timeStamp.getTime() - cbData.timeStamp.getTime(), "."));
  compareCurrencyPair(timeStamp, poloJSON, cbJSON, "USDC", coin);
}
/* compareCurrencyPair
 * desc: Compares a currency pair between Poloniex and Coinbase.  Notifies when significant arbitrage opportunities
 *       occur.
 */


function compareCurrencyPair(timeStamp, poloJSON, cbJSON, ccy1, ccy2) {
  var poloPair = ccy1 + "_" + ccy2;
  var poloBuyAt = +poloJSON[poloPair].lowestAsk;
  var cbSellAt = +cbJSON.bids[0][0];
  var arbOpportunity = cbSellAt - poloBuyAt;
  var arbPercent = 100 * (cbSellAt - poloBuyAt) / ((cbSellAt + poloBuyAt) / 2);

  if (arbPercent > arbReportingThresholdPercent) {
    var msg = "".concat(formatTimestamp(timeStamp), ": Pair: ").concat(poloPair, ", Result: GAIN, Desc: ").concat(poloPair, ". BUY Polo at: poloBuyAt: ").concat(poloBuyAt.toFixed(8), " SELL Coinbase at: ").concat(cbSellAt.toFixed(8), ", Amount: ").concat(arbOpportunity.toFixed(7), ", ").concat(arbPercent.toFixed(6), "%");
    if (arbPercent > arbEmailThresholdPercent) (0, _sendEMail.SendMessage)("".concat(poloPair, ": BUY ").concat(ccy2, " at Poloniex and SELL at Coinbase"), msg);
    console.log(msg);
  } else {
    console.log("".concat(formatTimestamp(timeStamp), ": Pair: ").concat(poloPair, ", Result: LOSS, Desc: poloBuyAt: ").concat(poloBuyAt.toFixed(8), " compared to cbSellAt: ").concat(cbSellAt.toFixed(8), ", DIFF: ").concat(arbOpportunity.toFixed(7)));
  }

  var cbBuyAt = +cbJSON.asks[0][0];
  var poloSellAt = +poloJSON[poloPair].highestBid;
  arbOpportunity = poloSellAt - cbBuyAt;
  arbPercent = 100 * (poloSellAt - cbBuyAt) / ((poloSellAt + cbBuyAt) / 2);

  if (arbPercent > arbReportingThresholdPercent) {
    var _msg = "".concat(formatTimestamp(timeStamp), ": Pair: ").concat(poloPair, ", Result: GAIN, Desc: ").concat(poloPair, ". BUY Coinbase at: cbBuyAt: ").concat(cbBuyAt.toFixed(7), " SELL Polo at: ").concat(poloSellAt.toFixed(7), ", Gain: ").concat(arbOpportunity.toFixed(7), ", ").concat(arbPercent.toFixed(6), "%");

    if (arbPercent > arbEmailThresholdPercent) (0, _sendEMail.SendMessage)("".concat(poloPair, ": BUY ").concat(ccy2, " at Coinbase and SELL at Poloniex"), _msg);
    console.log(_msg);
  } else {
    console.log("".concat(formatTimestamp(timeStamp), ": Pair: ").concat(poloPair, ", Result: LOSS, Desc: cbBuyAt: ").concat(cbBuyAt.toFixed(7), " compared to poloSellAt: ").concat(poloSellAt.toFixed(7), ", DIFF: ").concat(arbOpportunity.toFixed(7)));
  }
}
/* compareAllPoloniexBittrex
 * desc: Takes the poloniex and bittrex data in JSON format and compares all overlaping markets for arbitrage.
 *       Exported function called by the main app.js
 */


function compareAllPoloniexBittrex(poloJSON, bittrexJSON) {
  var reportingTimestamp = new Date();
  var poloTimestamp = poloJSON.timeStamp;
  var poloAllMarkets = JSON.parse(poloJSON.exchangeData);
  var bittrexTimestamp = bittrexJSON.timeStamp;
  console.log(poloTimestamp);
  console.log(bittrexTimestamp);

  for (var bittrexMkt in bittrexJSON.exchangeData) {
    var poloMktName = poloMktFromBittrexName(bittrexMkt);
    var poloMktElement = poloAllMarkets[poloMktName];
    comparePoloniexBittrexMktElement(poloMktElement, bittrexJSON.exchangeData[bittrexMkt], poloMktName, reportingTimestamp);
  }
}
/* comparePoloniexBittrexMktElement
 * desc: Compares a particular market between the Poloniex and Bittrex exchanges.  Sedn notifications when
 *       significant arbitrage opportunities exist.
 */


function comparePoloniexBittrexMktElement(poloJSON, bittrexJSON, poloPair, timeStamp) {
  var poloBuyAt = +poloJSON.lowestAsk;
  var poloSellAt = +poloJSON.highestBid;
  var bittrexSellAt = +bittrexJSON.Bid;
  var bittrexBuyAt = +bittrexJSON.Ask;
  var arbOpportunity = poloSellAt - bittrexBuyAt;
  var arbPercent = 100 * (poloSellAt - bittrexBuyAt) / ((poloSellAt + bittrexBuyAt) / 2);

  if (arbPercent > arbReportingThresholdPercent) {
    var msg = "".concat(formatTimestamp(timeStamp), ": Pair: ").concat(poloPair, ", Result: GAIN, Desc: ").concat(poloPair, ". BUY at Bittrex: bittrexBuyAt, ").concat(bittrexBuyAt.toFixed(8), " SELL Polo at, ").concat(poloSellAt.toFixed(8), ", Gain, ").concat(arbOpportunity.toFixed(7), ", ").concat(arbPercent.toFixed(6), "%");
    console.log(msg);

    if (arbPercent > arbEmailThresholdPercent) {
      var msgBody = "".concat(poloPair, "\n\n").concat(poloPair, " BUY at Bittrex for ").concat(bittrexBuyAt.toFixed(8), ".  Sell at Poloniex for ").concat(poloSellAt.toFixed(8), "\n");
      (0, _sendEMail.SendMessage)("".concat(poloPair, ": BUY at Bittrex and SELL at Poloniex"), msgBody);
    }
  } else {
    console.log("".concat(formatTimestamp(timeStamp), ": Pair: ").concat(poloPair, ", Result: LOSS, Desc: bittrexBuyAt, ").concat(bittrexBuyAt.toFixed(8), " is greater than poloSellAt, ").concat(poloSellAt.toFixed(8), ", DIFF, ").concat(arbOpportunity.toFixed(6)));
  }

  arbOpportunity = bittrexSellAt - poloBuyAt;
  arbPercent = 100 * (bittrexSellAt - poloBuyAt) / ((bittrexSellAt + poloBuyAt) / 2);

  if (arbPercent > arbReportingThresholdPercent) {
    var _msg2 = "".concat(formatTimestamp(timeStamp), ": Pair: ").concat(poloPair, ", Result: GAIN, Desc: ").concat(poloPair, ". BUY at Polo: poloBuyAt, ").concat(poloBuyAt.toFixed(8), " SELL Bittrex at, ").concat(bittrexSellAt.toFixed(8), ", Gain, ").concat(arbOpportunity.toFixed(7), ", ").concat(arbPercent.toFixed(6), "%");

    console.log(_msg2);

    if (arbPercent > arbEmailThresholdPercent) {
      var _msgBody = "".concat(poloPair, "\n\n").concat(poloPair, " BUY at Polo for ").concat(poloBuyAt.toFixed(8), ".  Sell at Bittrex for ").concat(bittrexSellAt.toFixed(8));

      (0, _sendEMail.SendMessage)("".concat(poloPair, ": BUY at Poloniex and SELL at Bittrex"), _msgBody);
    }
  } else {
    console.log("".concat(formatTimestamp(timeStamp), ": Pair: ").concat(poloPair, ", Result: LOSS, Desc: poloBuyAt, ").concat(poloBuyAt.toFixed(8), " is greater than bittrexSellAt, ").concat(bittrexSellAt.toFixed(8), ". DIFF, ").concat(arbOpportunity.toFixed(7)));
  }
}
/* poloMktFromBittrexName
 * desc: Converts a Bittrex crypto currency pair into the Poloniex pair.
 */


function poloMktFromBittrexName(bittrexMktName) {
  return bittrexMktName.replace("-", "_");
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9jb21wYXJlUHJpY2luZ0RhdGEuanMiXSwibmFtZXMiOlsiYXJiRW1haWxUaHJlc2hvbGRQZXJjZW50IiwiYXJiUmVwb3J0aW5nVGhyZXNob2xkUGVyY2VudCIsImZvcm1hdFRpbWVzdGFtcCIsInRpbWVTdGFtcCIsInRvU3RyaW5nIiwic2xpY2UiLCJjb21wYXJlUG9sb25pZXhDb2luYmFzZSIsInBvbG9EYXRhIiwiY2JEYXRhIiwiY29pbiIsInBvbG9KU09OIiwiSlNPTiIsInBhcnNlIiwiZXhjaGFuZ2VEYXRhIiwiY2JKU09OIiwiRGF0ZSIsImNvbnNvbGUiLCJsb2ciLCJnZXRUaW1lIiwiY29tcGFyZUN1cnJlbmN5UGFpciIsImNjeTEiLCJjY3kyIiwicG9sb1BhaXIiLCJwb2xvQnV5QXQiLCJsb3dlc3RBc2siLCJjYlNlbGxBdCIsImJpZHMiLCJhcmJPcHBvcnR1bml0eSIsImFyYlBlcmNlbnQiLCJtc2ciLCJ0b0ZpeGVkIiwiY2JCdXlBdCIsImFza3MiLCJwb2xvU2VsbEF0IiwiaGlnaGVzdEJpZCIsImNvbXBhcmVBbGxQb2xvbmlleEJpdHRyZXgiLCJiaXR0cmV4SlNPTiIsInJlcG9ydGluZ1RpbWVzdGFtcCIsInBvbG9UaW1lc3RhbXAiLCJwb2xvQWxsTWFya2V0cyIsImJpdHRyZXhUaW1lc3RhbXAiLCJiaXR0cmV4TWt0IiwicG9sb01rdE5hbWUiLCJwb2xvTWt0RnJvbUJpdHRyZXhOYW1lIiwicG9sb01rdEVsZW1lbnQiLCJjb21wYXJlUG9sb25pZXhCaXR0cmV4TWt0RWxlbWVudCIsImJpdHRyZXhTZWxsQXQiLCJCaWQiLCJiaXR0cmV4QnV5QXQiLCJBc2siLCJtc2dCb2R5IiwiYml0dHJleE1rdE5hbWUiLCJyZXBsYWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUlBOztBQUpBOzs7O0FBTUE7QUFDQSxJQUFNQSx3QkFBd0IsR0FBRyxJQUFqQyxDLENBQ0E7O0FBQ0EsSUFBTUMsNEJBQTRCLEdBQUcsR0FBckM7QUFFQTs7OztBQUdBLFNBQVNDLGVBQVQsQ0FBeUJDLFNBQXpCLEVBQW9DO0FBQ2xDLFNBQU9BLFNBQVMsQ0FBQ0MsUUFBVixHQUFxQkMsS0FBckIsQ0FBMkIsQ0FBM0IsRUFBNkIsRUFBN0IsQ0FBUDtBQUNEO0FBRUQ7Ozs7OztBQUlBLFNBQVNDLHVCQUFULENBQWlDQyxRQUFqQyxFQUEyQ0MsTUFBM0MsRUFBbURDLElBQW5ELEVBQXlEO0FBRXZELE1BQUlDLFFBQVEsR0FBR0MsSUFBSSxDQUFDQyxLQUFMLENBQVdMLFFBQVEsQ0FBQ00sWUFBcEIsQ0FBZjtBQUNBLE1BQUlDLE1BQU0sR0FBR0gsSUFBSSxDQUFDQyxLQUFMLENBQVdKLE1BQU0sQ0FBQ0ssWUFBbEIsQ0FBYjtBQUNBLE1BQUlWLFNBQVMsR0FBRyxJQUFJWSxJQUFKLEVBQWhCO0FBQ0FDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixXQUFlZixlQUFlLENBQUNDLFNBQUQsQ0FBOUIsZ0NBQStESSxRQUFRLENBQUNKLFNBQVQsQ0FBbUJlLE9BQW5CLEtBQTZCVixNQUFNLENBQUNMLFNBQVAsQ0FBaUJlLE9BQWpCLEVBQTVGO0FBQ0FDLEVBQUFBLG1CQUFtQixDQUFDaEIsU0FBRCxFQUFZTyxRQUFaLEVBQXNCSSxNQUF0QixFQUE4QixNQUE5QixFQUFzQ0wsSUFBdEMsQ0FBbkI7QUFDRDtBQUVEOzs7Ozs7QUFJQSxTQUFTVSxtQkFBVCxDQUE2QmhCLFNBQTdCLEVBQXdDTyxRQUF4QyxFQUFrREksTUFBbEQsRUFBMERNLElBQTFELEVBQWdFQyxJQUFoRSxFQUFzRTtBQUNwRSxNQUFJQyxRQUFRLEdBQUdGLElBQUksR0FBQyxHQUFMLEdBQVNDLElBQXhCO0FBQ0EsTUFBSUUsU0FBUyxHQUFHLENBQUNiLFFBQVEsQ0FBQ1ksUUFBRCxDQUFSLENBQW1CRSxTQUFwQztBQUNBLE1BQUlDLFFBQVEsR0FBRyxDQUFDWCxNQUFNLENBQUNZLElBQVAsQ0FBWSxDQUFaLEVBQWUsQ0FBZixDQUFoQjtBQUNBLE1BQUlDLGNBQWMsR0FBR0YsUUFBUSxHQUFDRixTQUE5QjtBQUNBLE1BQUlLLFVBQVUsR0FBRyxPQUFLSCxRQUFRLEdBQUNGLFNBQWQsS0FBMkIsQ0FBQ0UsUUFBUSxHQUFDRixTQUFWLElBQXVCLENBQWxELENBQWpCOztBQUNBLE1BQUdLLFVBQVUsR0FBRzNCLDRCQUFoQixFQUE4QztBQUM1QyxRQUFJNEIsR0FBRyxhQUFNM0IsZUFBZSxDQUFDQyxTQUFELENBQXJCLHFCQUEyQ21CLFFBQTNDLG1DQUE0RUEsUUFBNUUsdUNBQWlIQyxTQUFTLENBQUNPLE9BQVYsQ0FBa0IsQ0FBbEIsQ0FBakgsZ0NBQTJKTCxRQUFRLENBQUNLLE9BQVQsQ0FBaUIsQ0FBakIsQ0FBM0osdUJBQTJMSCxjQUFjLENBQUNHLE9BQWYsQ0FBdUIsQ0FBdkIsQ0FBM0wsZUFBeU5GLFVBQVUsQ0FBQ0UsT0FBWCxDQUFtQixDQUFuQixDQUF6TixNQUFQO0FBQ0EsUUFBSUYsVUFBVSxHQUFHNUIsd0JBQWpCLEVBQ0Usc0NBQWVzQixRQUFmLG1CQUFnQ0QsSUFBaEMsd0NBQXlFUSxHQUF6RTtBQUNGYixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWVksR0FBWjtBQUNELEdBTEQsTUFNSztBQUNIYixJQUFBQSxPQUFPLENBQUNDLEdBQVIsV0FBZWYsZUFBZSxDQUFDQyxTQUFELENBQTlCLHFCQUFvRG1CLFFBQXBELDhDQUFnR0MsU0FBUyxDQUFDTyxPQUFWLENBQWtCLENBQWxCLENBQWhHLG9DQUE4SUwsUUFBUSxDQUFDSyxPQUFULENBQWlCLENBQWpCLENBQTlJLHFCQUE0S0gsY0FBYyxDQUFDRyxPQUFmLENBQXVCLENBQXZCLENBQTVLO0FBQ0Q7O0FBQ0QsTUFBSUMsT0FBTyxHQUFHLENBQUNqQixNQUFNLENBQUNrQixJQUFQLENBQVksQ0FBWixFQUFlLENBQWYsQ0FBZjtBQUNBLE1BQUlDLFVBQVUsR0FBRyxDQUFDdkIsUUFBUSxDQUFDWSxRQUFELENBQVIsQ0FBbUJZLFVBQXJDO0FBQ0FQLEVBQUFBLGNBQWMsR0FBR00sVUFBVSxHQUFDRixPQUE1QjtBQUNBSCxFQUFBQSxVQUFVLEdBQUcsT0FBS0ssVUFBVSxHQUFDRixPQUFoQixLQUEyQixDQUFDRSxVQUFVLEdBQUNGLE9BQVosSUFBdUIsQ0FBbEQsQ0FBYjs7QUFDQSxNQUFHSCxVQUFVLEdBQUczQiw0QkFBaEIsRUFBOEM7QUFDNUMsUUFBSTRCLElBQUcsYUFBTTNCLGVBQWUsQ0FBQ0MsU0FBRCxDQUFyQixxQkFBMkNtQixRQUEzQyxtQ0FBNEVBLFFBQTVFLHlDQUFtSFMsT0FBTyxDQUFDRCxPQUFSLENBQWdCLENBQWhCLENBQW5ILDRCQUF1SkcsVUFBVSxDQUFDSCxPQUFYLENBQW1CLENBQW5CLENBQXZKLHFCQUF1TEgsY0FBYyxDQUFDRyxPQUFmLENBQXVCLENBQXZCLENBQXZMLGVBQXFORixVQUFVLENBQUNFLE9BQVgsQ0FBbUIsQ0FBbkIsQ0FBck4sTUFBUDs7QUFDQSxRQUFJRixVQUFVLEdBQUc1Qix3QkFBakIsRUFDRSxzQ0FBZXNCLFFBQWYsbUJBQWdDRCxJQUFoQyx3Q0FBeUVRLElBQXpFO0FBQ0ZiLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWSxJQUFaO0FBQ0QsR0FMRCxNQU1LO0FBQ0hiLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixXQUFlZixlQUFlLENBQUNDLFNBQUQsQ0FBOUIscUJBQW9EbUIsUUFBcEQsNENBQThGUyxPQUFPLENBQUNELE9BQVIsQ0FBZ0IsQ0FBaEIsQ0FBOUYsc0NBQTRJRyxVQUFVLENBQUNILE9BQVgsQ0FBbUIsQ0FBbkIsQ0FBNUkscUJBQTRLSCxjQUFjLENBQUNHLE9BQWYsQ0FBdUIsQ0FBdkIsQ0FBNUs7QUFDRDtBQUNEO0FBRUQ7Ozs7OztBQUlELFNBQVNLLHlCQUFULENBQW1DekIsUUFBbkMsRUFBNkMwQixXQUE3QyxFQUEwRDtBQUV4RCxNQUFJQyxrQkFBa0IsR0FBRyxJQUFJdEIsSUFBSixFQUF6QjtBQUNBLE1BQUl1QixhQUFhLEdBQUc1QixRQUFRLENBQUNQLFNBQTdCO0FBQ0EsTUFBSW9DLGNBQWMsR0FBRzVCLElBQUksQ0FBQ0MsS0FBTCxDQUFXRixRQUFRLENBQUNHLFlBQXBCLENBQXJCO0FBQ0EsTUFBSTJCLGdCQUFnQixHQUFHSixXQUFXLENBQUNqQyxTQUFuQztBQUNBYSxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWXFCLGFBQVo7QUFDQXRCLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZdUIsZ0JBQVo7O0FBQ0EsT0FBSSxJQUFJQyxVQUFSLElBQXNCTCxXQUFXLENBQUN2QixZQUFsQyxFQUErQztBQUM3QyxRQUFJNkIsV0FBVyxHQUFHQyxzQkFBc0IsQ0FBQ0YsVUFBRCxDQUF4QztBQUNBLFFBQUlHLGNBQWMsR0FBR0wsY0FBYyxDQUFDRyxXQUFELENBQW5DO0FBQ0FHLElBQUFBLGdDQUFnQyxDQUFDRCxjQUFELEVBQWlCUixXQUFXLENBQUN2QixZQUFaLENBQXlCNEIsVUFBekIsQ0FBakIsRUFBdURDLFdBQXZELEVBQW9FTCxrQkFBcEUsQ0FBaEM7QUFDRDtBQUNGO0FBRUQ7Ozs7OztBQUlBLFNBQVNRLGdDQUFULENBQTBDbkMsUUFBMUMsRUFBb0QwQixXQUFwRCxFQUFpRWQsUUFBakUsRUFBMkVuQixTQUEzRSxFQUFzRjtBQUVwRixNQUFJb0IsU0FBUyxHQUFHLENBQUNiLFFBQVEsQ0FBQ2MsU0FBMUI7QUFDQSxNQUFJUyxVQUFVLEdBQUcsQ0FBQ3ZCLFFBQVEsQ0FBQ3dCLFVBQTNCO0FBQ0EsTUFBSVksYUFBYSxHQUFHLENBQUNWLFdBQVcsQ0FBQ1csR0FBakM7QUFDQSxNQUFJQyxZQUFZLEdBQUcsQ0FBQ1osV0FBVyxDQUFDYSxHQUFoQztBQUNBLE1BQUl0QixjQUFjLEdBQUdNLFVBQVUsR0FBQ2UsWUFBaEM7QUFDQSxNQUFJcEIsVUFBVSxHQUFHLE9BQUtLLFVBQVUsR0FBQ2UsWUFBaEIsS0FBZ0MsQ0FBQ2YsVUFBVSxHQUFDZSxZQUFaLElBQTRCLENBQTVELENBQWpCOztBQUNBLE1BQUdwQixVQUFVLEdBQUczQiw0QkFBaEIsRUFBOEM7QUFDNUMsUUFBSTRCLEdBQUcsYUFBTTNCLGVBQWUsQ0FBQ0MsU0FBRCxDQUFyQixxQkFBMkNtQixRQUEzQyxtQ0FBNEVBLFFBQTVFLDZDQUF1SDBCLFlBQVksQ0FBQ2xCLE9BQWIsQ0FBcUIsQ0FBckIsQ0FBdkgsNEJBQWdLRyxVQUFVLENBQUNILE9BQVgsQ0FBbUIsQ0FBbkIsQ0FBaEsscUJBQWdNSCxjQUFjLENBQUNHLE9BQWYsQ0FBdUIsQ0FBdkIsQ0FBaE0sZUFBOE5GLFVBQVUsQ0FBQ0UsT0FBWCxDQUFtQixDQUFuQixDQUE5TixNQUFQO0FBQ0FkLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWSxHQUFaOztBQUNBLFFBQUlELFVBQVUsR0FBRzVCLHdCQUFqQixFQUEyQztBQUN6QyxVQUFJa0QsT0FBTyxhQUFNNUIsUUFBTixpQkFBcUJBLFFBQXJCLGlDQUFvRDBCLFlBQVksQ0FBQ2xCLE9BQWIsQ0FBcUIsQ0FBckIsQ0FBcEQscUNBQXNHRyxVQUFVLENBQUNILE9BQVgsQ0FBbUIsQ0FBbkIsQ0FBdEcsT0FBWDtBQUNBLDRDQUFlUixRQUFmLDRDQUFnRTRCLE9BQWhFO0FBQ0Q7QUFDRixHQVBELE1BUUs7QUFDSGxDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixXQUFlZixlQUFlLENBQUNDLFNBQUQsQ0FBOUIscUJBQW9EbUIsUUFBcEQsaURBQW1HMEIsWUFBWSxDQUFDbEIsT0FBYixDQUFxQixDQUFyQixDQUFuRywwQ0FBMEpHLFVBQVUsQ0FBQ0gsT0FBWCxDQUFtQixDQUFuQixDQUExSixxQkFBMExILGNBQWMsQ0FBQ0csT0FBZixDQUF1QixDQUF2QixDQUExTDtBQUNEOztBQUNESCxFQUFBQSxjQUFjLEdBQUdtQixhQUFhLEdBQUN2QixTQUEvQjtBQUNBSyxFQUFBQSxVQUFVLEdBQUcsT0FBS2tCLGFBQWEsR0FBQ3ZCLFNBQW5CLEtBQWdDLENBQUN1QixhQUFhLEdBQUN2QixTQUFmLElBQTRCLENBQTVELENBQWI7O0FBQ0EsTUFBR0ssVUFBVSxHQUFHM0IsNEJBQWhCLEVBQThDO0FBQzVDLFFBQUk0QixLQUFHLGFBQU0zQixlQUFlLENBQUNDLFNBQUQsQ0FBckIscUJBQTJDbUIsUUFBM0MsbUNBQTRFQSxRQUE1RSx1Q0FBaUhDLFNBQVMsQ0FBQ08sT0FBVixDQUFrQixDQUFsQixDQUFqSCwrQkFBMEpnQixhQUFhLENBQUNoQixPQUFkLENBQXNCLENBQXRCLENBQTFKLHFCQUE2TEgsY0FBYyxDQUFDRyxPQUFmLENBQXVCLENBQXZCLENBQTdMLGVBQTJORixVQUFVLENBQUNFLE9BQVgsQ0FBbUIsQ0FBbkIsQ0FBM04sTUFBUDs7QUFDQWQsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlZLEtBQVo7O0FBQ0EsUUFBSUQsVUFBVSxHQUFHNUIsd0JBQWpCLEVBQTJDO0FBQ3pDLFVBQUlrRCxRQUFPLGFBQU01QixRQUFOLGlCQUFxQkEsUUFBckIsOEJBQWlEQyxTQUFTLENBQUNPLE9BQVYsQ0FBa0IsQ0FBbEIsQ0FBakQsb0NBQStGZ0IsYUFBYSxDQUFDaEIsT0FBZCxDQUFzQixDQUF0QixDQUEvRixDQUFYOztBQUNBLDRDQUFlUixRQUFmLDRDQUFnRTRCLFFBQWhFO0FBQ0Q7QUFDRixHQVBELE1BUUs7QUFDSGxDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixXQUFlZixlQUFlLENBQUNDLFNBQUQsQ0FBOUIscUJBQW9EbUIsUUFBcEQsOENBQWdHQyxTQUFTLENBQUNPLE9BQVYsQ0FBa0IsQ0FBbEIsQ0FBaEcsNkNBQXVKZ0IsYUFBYSxDQUFDaEIsT0FBZCxDQUFzQixDQUF0QixDQUF2SixxQkFBMExILGNBQWMsQ0FBQ0csT0FBZixDQUF1QixDQUF2QixDQUExTDtBQUNEO0FBQ0Y7QUFFRDs7Ozs7QUFHQSxTQUFTYSxzQkFBVCxDQUFnQ1EsY0FBaEMsRUFBZ0Q7QUFDOUMsU0FBT0EsY0FBYyxDQUFDQyxPQUFmLENBQXVCLEdBQXZCLEVBQTRCLEdBQTVCLENBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIi8qIGNvbXBhcmVQcmljaW5nRGF0YS5qc1xuICogQ29uc29saWRhdGVzIGZ1bmN0aW9uIHRvIGNvbXBhcmUgY3J5cHRvIG1hcmtldHMgbG9va2luZyBmb3Igc2lnbmlmaWNhbnQgYXJiaXRyYWdlIG9wcG9ydHVuaXRpZXMuXG4gKiBTZW5kcyBub3RpZmljYXRpb25zIHdoZW4gbGFyZ2UgYXJiaXRyYWdlIGlzIGRldGVjdGVkLlxuICovXG5pbXBvcnQge1NlbmRNZXNzYWdlfSBmcm9tIFwiLi9zZW5kRU1haWxcIjtcblxuLy8gU2V0IHRoaXMgdG8gYmUgYSBjbGVhciB0cmFkaW5nIG9wcG9ydHVuaXR5XG5jb25zdCBhcmJFbWFpbFRocmVzaG9sZFBlcmNlbnQgPSAxLjI1O1xuLy8gU2V0IHRoaXMgdG8gYmUgdGhlIGZlZXMgYXNzb2NpYXRlZCB3aXRoIHRyYWRpbmdcbmNvbnN0IGFyYlJlcG9ydGluZ1RocmVzaG9sZFBlcmNlbnQgPSAwLjA7XG5cbi8qIGZvcm1hdFRpbWVzdGFtcFxuICogZGVzYzogU2ltcGxlIHV0aWxpdHkgdG8gdHJ1bmNhdGUgdGhlIG91dHB1dCBvZiBsb25nIHRpbWUgc3RhbXBzIHRvIGluY2x1ZGUgb25seSB0aGUgZGF0ZSBhbmQgdGltZSBwYXJ0cy5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0VGltZXN0YW1wKHRpbWVTdGFtcCkge1xuICByZXR1cm4odGltZVN0YW1wLnRvU3RyaW5nKCkuc2xpY2UoMCwyNSkpO1xufVxuXG4vKiBjb21wYXJlUG9sb25pZXhDb2luYmFzZVxuICogZGVzYzogTWFpbiBmdW5jdGlvbiBjYWxsZWQgdG8gY29tcGFyZSB0aGUgUG9sb25pZXggYW5kIENvaW5iYXNlIGNyeXB0byBtYXJrZXRzLlxuICogICAgICAgVGhpcyBmdW5jdGlvbiBpcyBleHBvcnRlZCBhbmQgY2FsbGVkIGJlIGFwcC5qc1xuICovXG5mdW5jdGlvbiBjb21wYXJlUG9sb25pZXhDb2luYmFzZShwb2xvRGF0YSwgY2JEYXRhLCBjb2luKSB7XG5cbiAgdmFyIHBvbG9KU09OID0gSlNPTi5wYXJzZShwb2xvRGF0YS5leGNoYW5nZURhdGEpO1xuICB2YXIgY2JKU09OID0gSlNPTi5wYXJzZShjYkRhdGEuZXhjaGFuZ2VEYXRhKTtcbiAgbGV0IHRpbWVTdGFtcCA9IG5ldyBEYXRlKCk7XG4gIGNvbnNvbGUubG9nKGAke2Zvcm1hdFRpbWVzdGFtcCh0aW1lU3RhbXApfTogUG9sb1RpbWUtQ0JUaW1lOiAke3BvbG9EYXRhLnRpbWVTdGFtcC5nZXRUaW1lKCktY2JEYXRhLnRpbWVTdGFtcC5nZXRUaW1lKCl9LmApO1xuICBjb21wYXJlQ3VycmVuY3lQYWlyKHRpbWVTdGFtcCwgcG9sb0pTT04sIGNiSlNPTiwgXCJVU0RDXCIsIGNvaW4pXG59XG5cbi8qIGNvbXBhcmVDdXJyZW5jeVBhaXJcbiAqIGRlc2M6IENvbXBhcmVzIGEgY3VycmVuY3kgcGFpciBiZXR3ZWVuIFBvbG9uaWV4IGFuZCBDb2luYmFzZS4gIE5vdGlmaWVzIHdoZW4gc2lnbmlmaWNhbnQgYXJiaXRyYWdlIG9wcG9ydHVuaXRpZXNcbiAqICAgICAgIG9jY3VyLlxuICovXG5mdW5jdGlvbiBjb21wYXJlQ3VycmVuY3lQYWlyKHRpbWVTdGFtcCwgcG9sb0pTT04sIGNiSlNPTiwgY2N5MSwgY2N5Mikge1xuICBsZXQgcG9sb1BhaXIgPSBjY3kxK1wiX1wiK2NjeTI7XG4gIGxldCBwb2xvQnV5QXQgPSArcG9sb0pTT05bcG9sb1BhaXJdLmxvd2VzdEFzaztcbiAgbGV0IGNiU2VsbEF0ID0gK2NiSlNPTi5iaWRzWzBdWzBdO1xuICBsZXQgYXJiT3Bwb3J0dW5pdHkgPSBjYlNlbGxBdC1wb2xvQnV5QXQ7XG4gIGxldCBhcmJQZXJjZW50ID0gMTAwKihjYlNlbGxBdC1wb2xvQnV5QXQpLyggKGNiU2VsbEF0K3BvbG9CdXlBdCkgLyAyKTtcbiAgaWYoYXJiUGVyY2VudCA+IGFyYlJlcG9ydGluZ1RocmVzaG9sZFBlcmNlbnQpIHtcbiAgICBsZXQgbXNnID0gYCR7Zm9ybWF0VGltZXN0YW1wKHRpbWVTdGFtcCl9OiBQYWlyOiAke3BvbG9QYWlyfSwgUmVzdWx0OiBHQUlOLCBEZXNjOiAke3BvbG9QYWlyfS4gQlVZIFBvbG8gYXQ6IHBvbG9CdXlBdDogJHtwb2xvQnV5QXQudG9GaXhlZCg4KX0gU0VMTCBDb2luYmFzZSBhdDogJHtjYlNlbGxBdC50b0ZpeGVkKDgpfSwgQW1vdW50OiAke2FyYk9wcG9ydHVuaXR5LnRvRml4ZWQoNyl9LCAke2FyYlBlcmNlbnQudG9GaXhlZCg2KX0lYDtcbiAgICBpZiAoYXJiUGVyY2VudCA+IGFyYkVtYWlsVGhyZXNob2xkUGVyY2VudClcbiAgICAgIFNlbmRNZXNzYWdlKGAke3BvbG9QYWlyfTogQlVZICR7Y2N5Mn0gYXQgUG9sb25pZXggYW5kIFNFTEwgYXQgQ29pbmJhc2VgLCBtc2cpO1xuICAgIGNvbnNvbGUubG9nKG1zZyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgY29uc29sZS5sb2coYCR7Zm9ybWF0VGltZXN0YW1wKHRpbWVTdGFtcCl9OiBQYWlyOiAke3BvbG9QYWlyfSwgUmVzdWx0OiBMT1NTLCBEZXNjOiBwb2xvQnV5QXQ6ICR7cG9sb0J1eUF0LnRvRml4ZWQoOCl9IGNvbXBhcmVkIHRvIGNiU2VsbEF0OiAke2NiU2VsbEF0LnRvRml4ZWQoOCl9LCBESUZGOiAke2FyYk9wcG9ydHVuaXR5LnRvRml4ZWQoNyl9YClcbiAgfVxuICBsZXQgY2JCdXlBdCA9ICtjYkpTT04uYXNrc1swXVswXTtcbiAgbGV0IHBvbG9TZWxsQXQgPSArcG9sb0pTT05bcG9sb1BhaXJdLmhpZ2hlc3RCaWQ7XG4gIGFyYk9wcG9ydHVuaXR5ID0gcG9sb1NlbGxBdC1jYkJ1eUF0O1xuICBhcmJQZXJjZW50ID0gMTAwKihwb2xvU2VsbEF0LWNiQnV5QXQpLyggKHBvbG9TZWxsQXQrY2JCdXlBdCkgLyAyKTtcbiAgaWYoYXJiUGVyY2VudCA+IGFyYlJlcG9ydGluZ1RocmVzaG9sZFBlcmNlbnQpIHtcbiAgICBsZXQgbXNnID0gYCR7Zm9ybWF0VGltZXN0YW1wKHRpbWVTdGFtcCl9OiBQYWlyOiAke3BvbG9QYWlyfSwgUmVzdWx0OiBHQUlOLCBEZXNjOiAke3BvbG9QYWlyfS4gQlVZIENvaW5iYXNlIGF0OiBjYkJ1eUF0OiAke2NiQnV5QXQudG9GaXhlZCg3KX0gU0VMTCBQb2xvIGF0OiAke3BvbG9TZWxsQXQudG9GaXhlZCg3KX0sIEdhaW46ICR7YXJiT3Bwb3J0dW5pdHkudG9GaXhlZCg3KX0sICR7YXJiUGVyY2VudC50b0ZpeGVkKDYpfSVgO1xuICAgIGlmIChhcmJQZXJjZW50ID4gYXJiRW1haWxUaHJlc2hvbGRQZXJjZW50KSBcbiAgICAgIFNlbmRNZXNzYWdlKGAke3BvbG9QYWlyfTogQlVZICR7Y2N5Mn0gYXQgQ29pbmJhc2UgYW5kIFNFTEwgYXQgUG9sb25pZXhgLCBtc2cpO1xuICAgIGNvbnNvbGUubG9nKG1zZyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgY29uc29sZS5sb2coYCR7Zm9ybWF0VGltZXN0YW1wKHRpbWVTdGFtcCl9OiBQYWlyOiAke3BvbG9QYWlyfSwgUmVzdWx0OiBMT1NTLCBEZXNjOiBjYkJ1eUF0OiAke2NiQnV5QXQudG9GaXhlZCg3KX0gY29tcGFyZWQgdG8gcG9sb1NlbGxBdDogJHtwb2xvU2VsbEF0LnRvRml4ZWQoNyl9LCBESUZGOiAke2FyYk9wcG9ydHVuaXR5LnRvRml4ZWQoNyl9YCk7XG4gIH1cbiB9XG5cbiAvKiBjb21wYXJlQWxsUG9sb25pZXhCaXR0cmV4XG4gICogZGVzYzogVGFrZXMgdGhlIHBvbG9uaWV4IGFuZCBiaXR0cmV4IGRhdGEgaW4gSlNPTiBmb3JtYXQgYW5kIGNvbXBhcmVzIGFsbCBvdmVybGFwaW5nIG1hcmtldHMgZm9yIGFyYml0cmFnZS5cbiAgKiAgICAgICBFeHBvcnRlZCBmdW5jdGlvbiBjYWxsZWQgYnkgdGhlIG1haW4gYXBwLmpzXG4gICovXG5mdW5jdGlvbiBjb21wYXJlQWxsUG9sb25pZXhCaXR0cmV4KHBvbG9KU09OLCBiaXR0cmV4SlNPTikge1xuXG4gIGxldCByZXBvcnRpbmdUaW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuICBsZXQgcG9sb1RpbWVzdGFtcCA9IHBvbG9KU09OLnRpbWVTdGFtcDtcbiAgbGV0IHBvbG9BbGxNYXJrZXRzID0gSlNPTi5wYXJzZShwb2xvSlNPTi5leGNoYW5nZURhdGEpO1xuICBsZXQgYml0dHJleFRpbWVzdGFtcCA9IGJpdHRyZXhKU09OLnRpbWVTdGFtcDtcbiAgY29uc29sZS5sb2cocG9sb1RpbWVzdGFtcCk7XG4gIGNvbnNvbGUubG9nKGJpdHRyZXhUaW1lc3RhbXApO1xuICBmb3IobGV0IGJpdHRyZXhNa3QgaW4gYml0dHJleEpTT04uZXhjaGFuZ2VEYXRhKXtcbiAgICBsZXQgcG9sb01rdE5hbWUgPSBwb2xvTWt0RnJvbUJpdHRyZXhOYW1lKGJpdHRyZXhNa3QpO1xuICAgIGxldCBwb2xvTWt0RWxlbWVudCA9IHBvbG9BbGxNYXJrZXRzW3BvbG9Na3ROYW1lXTtcbiAgICBjb21wYXJlUG9sb25pZXhCaXR0cmV4TWt0RWxlbWVudChwb2xvTWt0RWxlbWVudCwgYml0dHJleEpTT04uZXhjaGFuZ2VEYXRhW2JpdHRyZXhNa3RdLCBwb2xvTWt0TmFtZSwgcmVwb3J0aW5nVGltZXN0YW1wKVxuICB9XG59XG5cbi8qIGNvbXBhcmVQb2xvbmlleEJpdHRyZXhNa3RFbGVtZW50XG4gKiBkZXNjOiBDb21wYXJlcyBhIHBhcnRpY3VsYXIgbWFya2V0IGJldHdlZW4gdGhlIFBvbG9uaWV4IGFuZCBCaXR0cmV4IGV4Y2hhbmdlcy4gIFNlZG4gbm90aWZpY2F0aW9ucyB3aGVuXG4gKiAgICAgICBzaWduaWZpY2FudCBhcmJpdHJhZ2Ugb3Bwb3J0dW5pdGllcyBleGlzdC5cbiAqL1xuZnVuY3Rpb24gY29tcGFyZVBvbG9uaWV4Qml0dHJleE1rdEVsZW1lbnQocG9sb0pTT04sIGJpdHRyZXhKU09OLCBwb2xvUGFpciwgdGltZVN0YW1wKSB7XG5cbiAgbGV0IHBvbG9CdXlBdCA9ICtwb2xvSlNPTi5sb3dlc3RBc2s7XG4gIGxldCBwb2xvU2VsbEF0ID0gK3BvbG9KU09OLmhpZ2hlc3RCaWQ7XG4gIGxldCBiaXR0cmV4U2VsbEF0ID0gK2JpdHRyZXhKU09OLkJpZDtcbiAgbGV0IGJpdHRyZXhCdXlBdCA9ICtiaXR0cmV4SlNPTi5Bc2s7XG4gIGxldCBhcmJPcHBvcnR1bml0eSA9IHBvbG9TZWxsQXQtYml0dHJleEJ1eUF0O1xuICBsZXQgYXJiUGVyY2VudCA9IDEwMCoocG9sb1NlbGxBdC1iaXR0cmV4QnV5QXQpLyggKHBvbG9TZWxsQXQrYml0dHJleEJ1eUF0KSAvIDIpO1xuICBpZihhcmJQZXJjZW50ID4gYXJiUmVwb3J0aW5nVGhyZXNob2xkUGVyY2VudCkge1xuICAgIGxldCBtc2cgPSBgJHtmb3JtYXRUaW1lc3RhbXAodGltZVN0YW1wKX06IFBhaXI6ICR7cG9sb1BhaXJ9LCBSZXN1bHQ6IEdBSU4sIERlc2M6ICR7cG9sb1BhaXJ9LiBCVVkgYXQgQml0dHJleDogYml0dHJleEJ1eUF0LCAke2JpdHRyZXhCdXlBdC50b0ZpeGVkKDgpfSBTRUxMIFBvbG8gYXQsICR7cG9sb1NlbGxBdC50b0ZpeGVkKDgpfSwgR2FpbiwgJHthcmJPcHBvcnR1bml0eS50b0ZpeGVkKDcpfSwgJHthcmJQZXJjZW50LnRvRml4ZWQoNil9JWA7XG4gICAgY29uc29sZS5sb2cobXNnKTtcbiAgICBpZiAoYXJiUGVyY2VudCA+IGFyYkVtYWlsVGhyZXNob2xkUGVyY2VudCkge1xuICAgICAgbGV0IG1zZ0JvZHkgPSBgJHtwb2xvUGFpcn1cXG5cXG4ke3BvbG9QYWlyfSBCVVkgYXQgQml0dHJleCBmb3IgJHtiaXR0cmV4QnV5QXQudG9GaXhlZCg4KX0uICBTZWxsIGF0IFBvbG9uaWV4IGZvciAke3BvbG9TZWxsQXQudG9GaXhlZCg4KX1cXG5gO1xuICAgICAgU2VuZE1lc3NhZ2UoYCR7cG9sb1BhaXJ9OiBCVVkgYXQgQml0dHJleCBhbmQgU0VMTCBhdCBQb2xvbmlleGAsIG1zZ0JvZHkpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhgJHtmb3JtYXRUaW1lc3RhbXAodGltZVN0YW1wKX06IFBhaXI6ICR7cG9sb1BhaXJ9LCBSZXN1bHQ6IExPU1MsIERlc2M6IGJpdHRyZXhCdXlBdCwgJHtiaXR0cmV4QnV5QXQudG9GaXhlZCg4KX0gaXMgZ3JlYXRlciB0aGFuIHBvbG9TZWxsQXQsICR7cG9sb1NlbGxBdC50b0ZpeGVkKDgpfSwgRElGRiwgJHthcmJPcHBvcnR1bml0eS50b0ZpeGVkKDYpfWApO1xuICB9XG4gIGFyYk9wcG9ydHVuaXR5ID0gYml0dHJleFNlbGxBdC1wb2xvQnV5QXQ7XG4gIGFyYlBlcmNlbnQgPSAxMDAqKGJpdHRyZXhTZWxsQXQtcG9sb0J1eUF0KS8oIChiaXR0cmV4U2VsbEF0K3BvbG9CdXlBdCkgLyAyKTtcbiAgaWYoYXJiUGVyY2VudCA+IGFyYlJlcG9ydGluZ1RocmVzaG9sZFBlcmNlbnQpIHtcbiAgICBsZXQgbXNnID0gYCR7Zm9ybWF0VGltZXN0YW1wKHRpbWVTdGFtcCl9OiBQYWlyOiAke3BvbG9QYWlyfSwgUmVzdWx0OiBHQUlOLCBEZXNjOiAke3BvbG9QYWlyfS4gQlVZIGF0IFBvbG86IHBvbG9CdXlBdCwgJHtwb2xvQnV5QXQudG9GaXhlZCg4KX0gU0VMTCBCaXR0cmV4IGF0LCAke2JpdHRyZXhTZWxsQXQudG9GaXhlZCg4KX0sIEdhaW4sICR7YXJiT3Bwb3J0dW5pdHkudG9GaXhlZCg3KX0sICR7YXJiUGVyY2VudC50b0ZpeGVkKDYpfSVgO1xuICAgIGNvbnNvbGUubG9nKG1zZyk7XG4gICAgaWYgKGFyYlBlcmNlbnQgPiBhcmJFbWFpbFRocmVzaG9sZFBlcmNlbnQpIHtcbiAgICAgIGxldCBtc2dCb2R5ID0gYCR7cG9sb1BhaXJ9XFxuXFxuJHtwb2xvUGFpcn0gQlVZIGF0IFBvbG8gZm9yICR7cG9sb0J1eUF0LnRvRml4ZWQoOCl9LiAgU2VsbCBhdCBCaXR0cmV4IGZvciAke2JpdHRyZXhTZWxsQXQudG9GaXhlZCg4KX1gO1xuICAgICAgU2VuZE1lc3NhZ2UoYCR7cG9sb1BhaXJ9OiBCVVkgYXQgUG9sb25pZXggYW5kIFNFTEwgYXQgQml0dHJleGAsIG1zZ0JvZHkpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhgJHtmb3JtYXRUaW1lc3RhbXAodGltZVN0YW1wKX06IFBhaXI6ICR7cG9sb1BhaXJ9LCBSZXN1bHQ6IExPU1MsIERlc2M6IHBvbG9CdXlBdCwgJHtwb2xvQnV5QXQudG9GaXhlZCg4KX0gaXMgZ3JlYXRlciB0aGFuIGJpdHRyZXhTZWxsQXQsICR7Yml0dHJleFNlbGxBdC50b0ZpeGVkKDgpfS4gRElGRiwgJHthcmJPcHBvcnR1bml0eS50b0ZpeGVkKDcpfWApO1xuICB9XG59XG5cbi8qIHBvbG9Na3RGcm9tQml0dHJleE5hbWVcbiAqIGRlc2M6IENvbnZlcnRzIGEgQml0dHJleCBjcnlwdG8gY3VycmVuY3kgcGFpciBpbnRvIHRoZSBQb2xvbmlleCBwYWlyLlxuICovXG5mdW5jdGlvbiBwb2xvTWt0RnJvbUJpdHRyZXhOYW1lKGJpdHRyZXhNa3ROYW1lKSB7XG4gIHJldHVybihiaXR0cmV4TWt0TmFtZS5yZXBsYWNlKFwiLVwiLCBcIl9cIikpO1xufVxuXG5leHBvcnQge2NvbXBhcmVQb2xvbmlleENvaW5iYXNlLCBjb21wYXJlQWxsUG9sb25pZXhCaXR0cmV4fTtcbiJdfQ==