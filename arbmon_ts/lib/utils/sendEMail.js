"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SendMessage = SendMessage;

var nodemailer = require("nodemailer");

var numSent = {};

function SendMessage(Subject, Message) {
  console.log("Email message: ", Message);

  if (!numSent[Subject]) {
    numSent[Subject] = 0;
  } else {
    if (numSent[Subject] > 1) {
      console.log("Too many emails for:" + Subject);
      return;
    }
  }

  numSent[Subject]++;
  var u = process.env.emailU;
  var p = process.env.emailP;

  if (!u || !p) {
    console.log("Either the username or password not set in the environment.  No email was sent.");
    return;
  }

  var transporter = nodemailer.createTransport({
    service: "gmail",
    auth: {
      user: u,
      pass: p
    }
  });
  var mailOptions = {
    from: "louismenna3@gmail.com",
    to: "louismenna@yahoo.com",
    subject: Subject,
    html: Message
  };
  transporter.sendMail(mailOptions, function (error, info) {
    if (error) {
      console.log(error);
    } else {
      console.log("Email sent: " + info.response);
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9zZW5kRU1haWwuanMiXSwibmFtZXMiOlsibm9kZW1haWxlciIsInJlcXVpcmUiLCJudW1TZW50IiwiU2VuZE1lc3NhZ2UiLCJTdWJqZWN0IiwiTWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJ1IiwicHJvY2VzcyIsImVudiIsImVtYWlsVSIsInAiLCJlbWFpbFAiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwidXNlciIsInBhc3MiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJodG1sIiwic2VuZE1haWwiLCJlcnJvciIsImluZm8iLCJyZXNwb25zZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUlBLFVBQVUsR0FBR0MsT0FBTyxDQUFDLFlBQUQsQ0FBeEI7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHLEVBQWQ7O0FBRUEsU0FBU0MsV0FBVCxDQUFxQkMsT0FBckIsRUFBOEJDLE9BQTlCLEVBQXVDO0FBRXJDQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxpQkFBWixFQUErQkYsT0FBL0I7O0FBQ0EsTUFBRyxDQUFDSCxPQUFPLENBQUNFLE9BQUQsQ0FBWCxFQUFzQjtBQUNwQkYsSUFBQUEsT0FBTyxDQUFDRSxPQUFELENBQVAsR0FBbUIsQ0FBbkI7QUFDRCxHQUZELE1BR0s7QUFDSCxRQUFJRixPQUFPLENBQUNFLE9BQUQsQ0FBUCxHQUFtQixDQUF2QixFQUEwQjtBQUN4QkUsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVkseUJBQXlCSCxPQUFyQztBQUNBO0FBQ0Q7QUFDRjs7QUFDREYsRUFBQUEsT0FBTyxDQUFDRSxPQUFELENBQVA7QUFDQSxNQUFJSSxDQUFDLEdBQUtDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxNQUF0QjtBQUNBLE1BQUlDLENBQUMsR0FBR0gsT0FBTyxDQUFDQyxHQUFSLENBQVlHLE1BQXBCOztBQUNBLE1BQUksQ0FBQ0wsQ0FBRCxJQUFNLENBQUNJLENBQVgsRUFBYztBQUNaTixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxpRkFBWjtBQUNBO0FBQ0Q7O0FBRUQsTUFBSU8sV0FBVyxHQUFHZCxVQUFVLENBQUNlLGVBQVgsQ0FBMkI7QUFDM0NDLElBQUFBLE9BQU8sRUFBRSxPQURrQztBQUUzQ0MsSUFBQUEsSUFBSSxFQUFFO0FBQ0pDLE1BQUFBLElBQUksRUFBRVYsQ0FERjtBQUVKVyxNQUFBQSxJQUFJLEVBQUVQO0FBRkY7QUFGcUMsR0FBM0IsQ0FBbEI7QUFRQSxNQUFJUSxXQUFXLEdBQUc7QUFDaEJDLElBQUFBLElBQUksRUFBRSx1QkFEVTtBQUVoQkMsSUFBQUEsRUFBRSxFQUFFLHNCQUZZO0FBR2hCQyxJQUFBQSxPQUFPLEVBQUVuQixPQUhPO0FBSWhCb0IsSUFBQUEsSUFBSSxFQUFFbkI7QUFKVSxHQUFsQjtBQU9BUyxFQUFBQSxXQUFXLENBQUNXLFFBQVosQ0FBcUJMLFdBQXJCLEVBQWtDLFVBQVNNLEtBQVQsRUFBZ0JDLElBQWhCLEVBQXNCO0FBQ3RELFFBQUlELEtBQUosRUFBVztBQUNUcEIsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVltQixLQUFaO0FBQ0QsS0FGRCxNQUdLO0FBQ0hwQixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxpQkFBaUJvQixJQUFJLENBQUNDLFFBQWxDO0FBQ0Q7QUFDRixHQVBEO0FBUUQiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbm9kZW1haWxlciA9IHJlcXVpcmUoXCJub2RlbWFpbGVyXCIpO1xudmFyIG51bVNlbnQgPSB7fTtcblxuZnVuY3Rpb24gU2VuZE1lc3NhZ2UoU3ViamVjdCwgTWVzc2FnZSkge1xuXG4gIGNvbnNvbGUubG9nKFwiRW1haWwgbWVzc2FnZTogXCIsIE1lc3NhZ2UpO1xuICBpZighbnVtU2VudFtTdWJqZWN0XSkge1xuICAgIG51bVNlbnRbU3ViamVjdF0gPSAwO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmIChudW1TZW50W1N1YmplY3RdID4gMSkge1xuICAgICAgY29uc29sZS5sb2coXCJUb28gbWFueSBlbWFpbHMgZm9yOlwiICsgU3ViamVjdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIG51bVNlbnRbU3ViamVjdF0rKztcbiAgdmFyIHUgICA9IHByb2Nlc3MuZW52LmVtYWlsVTtcbiAgdmFyIHAgPSBwcm9jZXNzLmVudi5lbWFpbFA7XG4gIGlmICghdSB8fCAhcCkge1xuICAgIGNvbnNvbGUubG9nKFwiRWl0aGVyIHRoZSB1c2VybmFtZSBvciBwYXNzd29yZCBub3Qgc2V0IGluIHRoZSBlbnZpcm9ubWVudC4gIE5vIGVtYWlsIHdhcyBzZW50LlwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgc2VydmljZTogXCJnbWFpbFwiLFxuICAgIGF1dGg6IHtcbiAgICAgIHVzZXI6IHUsXG4gICAgICBwYXNzOiBwXG4gICAgfVxuICB9KTtcblxuICB2YXIgbWFpbE9wdGlvbnMgPSB7XG4gICAgZnJvbTogXCJsb3Vpc21lbm5hM0BnbWFpbC5jb21cIixcbiAgICB0bzogXCJsb3Vpc21lbm5hQHlhaG9vLmNvbVwiLFxuICAgIHN1YmplY3Q6IFN1YmplY3QsXG4gICAgaHRtbDogTWVzc2FnZVxuICB9O1xuXG4gIHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zLCBmdW5jdGlvbihlcnJvciwgaW5mbykge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRW1haWwgc2VudDogXCIgKyBpbmZvLnJlc3BvbnNlKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQge1NlbmRNZXNzYWdlfTtcbiJdfQ==